<!DOCTYPE html>
<html>
 <head> 
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> 
  <meta content="yes" name="apple-mobile-web-app-capable" /> 
  <meta content="black" name="apple-mobile-web-app-status-bar-style" /> 
  <meta content="telephone=no" name="format-detection" /> 
  <!-- <link href="https:https://zhcdn01.xoyo.com/xassets/com/pf/reset/reset.css" rel="stylesheet">--> 
  <!--外部css资源从这里开始--> 
  <!-- <link href="https://zhcdn01.xoyo.com/assets/lib/dialog/artDialog/skins/001/ui.css" class="external" rel="stylesheet">--> 
  <!--    截图样式--> 
  <link class="external" href="https://zhcdn01.xoyo.com/xassets/lib/cropper/3.1.4/cropper.min.css" rel="stylesheet" /> 
  <link rel="stylesheet" href="assets/css/style.css" /> 
  <style>.sal-crop { overflow: hidden; position: relative; } .sal-crop-container { position: relative; width: 100%; min-height: 1px; padding-right: 8px; padding-left: 8px; -webkit-box-sizing: border-box; box-sizing: border-box; } .sal-crop-panel { height: 400px; background: #fff url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFgAAABLCAIAAAB7tddWAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1Q0VBNzA0MjEyMDUxMUUzODk2Q0JFM0Q1RjE4QkExQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1Q0VBNzA0MzEyMDUxMUUzODk2Q0JFM0Q1RjE4QkExQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjAzNDA2MkY1MTIwMzExRTM4OTZDQkUzRDVGMThCQTFDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjAzNDA2MkY2MTIwMzExRTM4OTZDQkUzRDVGMThCQTFDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+K6izdgAAAk1JREFUeNrt2+uOgjAQhuG9/5tUPEs0nhU87hvNGoJY0C0yyNffBNuHdjpT8Oeidm0/IhCEIAQhCEEIQhCCEMT5fA6CoHVt7Xb7dDo1d0Yw/tZfE4QgBCEIQQjCHMThcBiPx51Op/XBljngl1pufvEaxH6//zCBUQjmwttd+SqI9rUJ4pK89XA4jKKoocEyCUG8aO6ukYSg5hOEIAQhCEH4gOCa+Xze7/e5vtvtTiaT4/HYOAj2116vl0psgiDYbrcGy7YSIQaDQWaSh0VJ88IixHK5dCS80+m0KRBhGDogWDIex8D8St7cVowYjUYOCGr5gr8YxzEhFjhiLUGXqfRY4JiGoPcOCMJH7m8xnmc3od5LVjqmIXa7nQOCPTX3HOy26TrK6tVqVQMIR5hgnrv7ysAe910HqHUILmBJp7pO7OBpe1G4tfV6bR3iHu0WiwWrfTab5aZSjMG9IjLXyGazqQHEq2eibxzD3V+FfwkEU8bLAWe9IVg1vk56awxB+ExN74ZCkCB5PPuvKwS5gN+XICYg6AQDI1lgv2TjzL2hOwGtKwQBj9KoeCpNj1PXfwMEWVNmt5gazxaRu1SvJYR7nRMLH4+kvIeG6iGKDInyIVliUCCU98a4GojiQ6IoIHeMoohFVOor9QogiPmVfCVgC4JnW8nXM+Ygytj5aglhtglCEIIQhCCMQFT1neVLh9qfeAlM+WQcgh5+AiKOY5vZ5H06FDkN8gBxO2gNw5C00s7UoCf0h1795xtY/e9TEIIQhCAEIQhBCEIQftovDwuUVV5nLjcAAAAASUVORK5CYII= ) center 120px no-repeat; border: 4px dashed #ddd; position: relative; text-align: center; } .sal-crop-tip { position: absolute; top: 280px; left: 50%; width: 280px; color: #aaa; text-align: center; margin-left: -140px; } .sal-crop-tip-link { font-size: 20px; background-color: #337ab7; border-radius: 3px; line-height: 44px; height: 45px; padding: 0 30px; color: #fff; display: inline-block; margin: 5px auto 15px; cursor: pointer; -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1); box-shadow: 0 1px 1px rgba(0, 0, 0, 0.1); text-decoration: none; } .sal-crop-tip-link:hover { text-decoration: none; opacity: .9; } .sal-crop-tip-link:active { opacity: .8; } .sal-crop-col-9 { width: 75%; float: left; min-height: 1px; -webkit-box-sizing: border-box; box-sizing: border-box; padding-right: 8px; padding-left: 8px; } .sal-crop-col-3 { width: 25%; float: left; min-height: 1px; -webkit-box-sizing: border-box; box-sizing: border-box; padding-right: 8px; padding-left: 8px; } .sal-crop-col-6 { width: 50%; float: left; min-height: 1px; -webkit-box-sizing: border-box; box-sizing: border-box; padding-right: 8px; padding-left: 8px; } .sal-crop-col-12 { width: 100%; min-height: 1px; -webkit-box-sizing: border-box; box-sizing: border-box; padding-right: 8px; padding-left: 8px; } .sal-crop-img-container { background-color: #f7f7f7; text-align: center; width: 100%; min-height: 400px; } .sal-crop-img-container img { max-width: 100%; } .sal-crop-preview { overflow: hidden; margin-bottom: 16px; } .sal-crop-img-preview { float: left; margin-bottom: .5rem; margin-right: .5rem; overflow: hidden; } .sal-crop-img-preview-lg { height: 9rem; width: 16rem; } .sal-crop-img-preview-md { height: 4.5rem; width: 8rem; } .sal-crop-img-preview-sm { height: 2.25rem; width: 4rem; } .sal-crop-img-preview-xs { height: 1.125rem; margin-right: 0; width: 2rem; } .sal-crop-clearfix:after { display: table; content: " "; clear: both; } .sal-crop-settings { margin: 16px 0; } .sal-crop-input-group { position: relative; display: table; border-collapse: separate; margin-bottom: 16px; } .sal-crop-input-label { display: table-cell; width: 1%; white-space: nowrap; vertical-align: middle; font-weight: 400; color: #555; text-align: center; background-color: #eee; border: 1px solid #ccc; height: 30px; padding: 5px 10px; font-size: 12px; line-height: 1.5; border-radius: 3px 0 0 3px; border-right: 0; -webkit-box-sizing: border-box; box-sizing: border-box; } .sal-crop-img-preview { float: left; margin-bottom: .5rem; margin-right: .5rem; overflow: hidden; } .sal-crop-form-control { width: 100%; color: #555; border: 1px solid #ccc; -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075); -webkit-transition: border-color ease-in-out 0.15s, -webkit-box-shadow ease-in-out 0.15s; -o-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; transition: border-color ease-in-out 0.15s, -webkit-box-shadow ease-in-out 0.15s; transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s; transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s, -webkit-box-shadow ease-in-out 0.15s; height: 30px; padding: 5px 10px; font-size: 12px; line-height: 1.5; display: table-cell; border-radius: 0 3px 3px 0; -webkit-box-sizing: border-box; box-sizing: border-box; } .sal-crop-btn { display: inline-block; margin-bottom: 0; font-weight: 400; text-align: center; white-space: nowrap; vertical-align: middle; -ms-touch-action: manipulation; touch-action: manipulation; cursor: pointer; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none; color: #fff; background-color: #337ab7; padding: 8px 16px; font-size: 16px; line-height: 1.3333333; border-radius: 6px; width: 100%; border: none; outline: none; } .sal-crop-btn:hover { text-decoration: none; opacity: .9; } .sal-crop-btn:active { opacity: .8; } .sal-crop-reselect { background-color: #5cb85c; } .sal-crop-select { width: 0; height: 0; display: none; } .sal-crop-loading { position: absolute; top: 0; right: 0; bottom: 0; left: 0; background: #fff url(data:image/gif;base64,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
    ) no-repeat center center; opacity: .75; filter: alpha(opacity=75); z-index: 20140628; } .c-chrome-mask { background-color: #f7f7f7; position: absolute; top: 0; left: 0; bottom: 0; right: 0; -webkit-transition: background-color 300ms; -o-transition: background-color 300ms; transition: background-color 300ms; } .c-chrome-mask:hover { background-color: #fff; } .c-chrome-mask-main { display: block; width: 250px; height: 100px; text-align: center; margin: auto; position: absolute; top: 0; right: 0; bottom: 0; left: 0; } .c-chrome-mask-ic { background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACpUlEQVRYR7WXjTEEQRCF30WACBABIuAiQASIABEgAxcBIkAEiAARIAInAurbmt5qezPTo+501dZdzfZMv379M70jtcuypG1Je5LWJO0Mtj5KeknPvaRpy9GjBiWMnSXDgGgRjN9JupD0XtsQAbiUdNxisaJznoBkVUoANiVdSeJ3EUJo9nNs5ABg9EFSK92tAAnLOOVIv2cI4L+Mm0FAbHkmhgDIbLz/TyEcgOgkFwKyd7cRwWtruQ3OI7mx0wOg1HioZX5BuVQAcSOJA9CZW4yBa0kbjhpKh9r3greHizLsQ0C2f6aFI0mAYQ0PV9P6RypJ627kykFiCxWaDczAoAkUl1g0nTEM4BU1j2BgPf36dZLGKAcgxnPCO5xAqKjnIEb7ABh2u4mkk7QRj/AOMEjNuNnyICL9CQAwwiXjBRYwbJ0Q7/9SojQczo32PAHgO0MTmznES+SN1/Us5s433ZcSABTMC1POMVUK8ZO7rmHSknlGvwaAjYRiXgCEjxLPCgBqCE9TkrYmoBmhJC1xayF4LSWhHeTLMkoo76GFLyrFLgmjocN705KIf9HvypAZ77YUo7TuE7IGwhuPvOforhEhUF1rm+QJIGy+IxzEmIsLYR1gvhVHVfNFy/eXUam9+nyYmWgKzLWw2rFlAPDkLQiDveaSwVtG75xwkXEHGDs5Hbzn/dQPJLkrOMIE9Twrrm23nMO4jt7MRFRtGhU0lqR4hfe1gZa5op+2hyNZNA3lMBAKYt7SrHrq7aDSWE4GR8OEnWE3Z9SoGGoA+muUq32Y2JhWy4M+lungUs+HdgDOfC9Gn2a1hPJjmp+ePGAop9N2CZeTCAB7yAsmJIz4sPj5kRL2iYdhypV91a/kFgAGHAPQyMN/u+3wjthiiJLEcDfzt8gPB5uk/mIOP3UAAAAASUVORK5CYII= ); width: 32px; height: 32px; margin: 16px auto; } .c-chrome-mask-text { color: #646464; font-size: 16px; }</style> 
  <title>剑网3同人嘉年华—外装设计大赛</title>
 </head> 
 <body>
  <div class="warp" id="subpage"> 
   <div class="warp-page "> 
    <div class="container"> 
     <div class="subtable"> 
      <div class="subbox"> 
       <div class="formbox"> 
        <div class="subpics"> 
         <label for="cl_fm"> <span>上传封面：</span> 
          <div class="sal-crop-dialog"> 
           <span class="sal-crop-dialog-crop-wrapper" style="display: none"> 
            <div data-id="sal-crop" class="sal-crop" data-support-image-formats="jpg|jpeg|png|gif" data-auto-init="true" data-aspect-ratio="0.8729641693811075"> 
             <div class="sal-crop-col-9" style="width: 100%;"> 
              <div class="sal-crop-img-container"> 
               <div class="sal-crop-panel"> 
                <div class="sal-crop-tip"> 
                 <a class="sal-crop-tip-link" href="javascript:">选择图片</a> 
                 <br /> 
                 <!--或者选择一张图片拖拽图片到这里来-->
                </div> 
               </div> 
               <img class="sal-crop-image" style="display: none" />
              </div> 
             </div> 
             <div class="sal-crop-col-3" style="display: none;"> 
              <div class="sal-crop-preview"> 
               <div class="sal-crop-img-preview sal-crop-img-preview-lg"></div> 
               <div class="sal-crop-img-preview sal-crop-img-preview-md"></div> 
               <div class="sal-crop-img-preview sal-crop-img-preview-sm"></div> 
               <div class="sal-crop-img-preview sal-crop-img-preview-xs"></div> 
              </div> 
              <div class="sal-crop-settings"> 
               <div class="sal-crop-clearfix"> 
                <div class="sal-crop-input-group sal-crop-col-6"> 
                 <label class="sal-crop-input-label" for="dataX">X轴 (px)</label> 
                 <input class="sal-crop-form-control sal-crop-data-x" />
                </div> 
                <div class="sal-crop-input-group sal-crop-col-6"> 
                 <label class="sal-crop-input-label" for="dataY">Y轴 (px)</label> 
                 <input class="sal-crop-form-control sal-crop-data-y" />
                </div> 
               </div> 
               <div class="sal-crop-clearfix"> 
                <div class="sal-crop-input-group sal-crop-col-6"> 
                 <label class="sal-crop-input-label" for="dataWidth">宽 (px)</label> 
                 <input class="sal-crop-form-control sal-crop-data-width" />
                </div> 
                <div class="sal-crop-input-group sal-crop-col-6"> 
                 <label class="sal-crop-input-label" for="dataHeight">高 (px)</label> 
                 <input class="sal-crop-form-control sal-crop-data-height" />
                </div> 
               </div> 
               <div class="sal-crop-clearfix"> 
                <div class="sal-crop-input-group sal-crop-col-12"> 
                 <label class="sal-crop-input-label" for="dataRotate">旋转 (度数)</label> 
                 <input class="sal-crop-form-control sal-crop-data-rotate" />
                </div> 
               </div> 
               <div class="sal-crop-clearfix"> 
                <form class="sal-crop-upload-form" action="https://test.ws.xoyo.com/jx3/submitpic200518/get_upload_token?type=2" enctype="multipart/form-data" method="post"> 
                 <div class="sal-crop-input-group sal-crop-col-12"> 
                  <div class="sal-crop-select-group"> 
                   <button type="button" class="sal-crop-btn sal-crop-reselect">重新选择</button> 
                   <input class="sal-crop-select" type="file" accept=".jpg,.jpeg,.png,.gif" />
                  </div> 
                 </div> 
                 <div class="sal-crop-input-group sal-crop-col-12"> 
                  <div class="sal-crop-select-group"> 
                   <button type="submit" class="sal-crop-btn sal-crop-upload-btn">上传图片</button>
                  </div> 
                 </div> 
                </form> 
               </div> 
              </div> 
             </div> 
             <div class="sal-crop-loading" aria-label="Loading" role="img" tabindex="-1" style="display: none;"></div> 
             <a href="http://browsehappy.osfipin.com/" class="c-chrome-mask" data-lt-ie="9" style="display: none"> 
              <div class="c-chrome-mask-main"> 
               <div class="c-chrome-mask-ic"></div> 
               <span class="c-chrome-mask-text">您的浏览器版本过低，无法支持该功能，点击前往升级您的浏览器</span>
              </div> </a> 
            </div> </span> 
           <button>上传 <img id="fm-pic" src="assets/images/btn_subfm.jpg" alt="" width="153px" height="192px" /></button> 
          </div> </label> 
        </div> 
       </div> 
      </div> 
     </div> 
    </div> 
   </div> 
  </div> 
  <!--外部资源从这里开始--> 
  <script class="external" src="https://zhcdn01.xoyo.com/xassets/lib/jquery/1.7.2/jquery.min.js"></script> 
  <!--截图--> 
  <script class="external" src="https://zhcdn01.xoyo.com/xassets/lib/cropper/3.1.4/cropper.min.js"></script> 
  <!--弹窗组件--> 
  <script class="external" src="https://zhcdn01.xoyo.com/xassets/lib/dialog/artDialog/4.1.7/artDialog.js"></script> 
  <script src="https://zhcdn01.xoyo.com/xassets/com/pf/upqiniu/assets/js/moxie.min.js"></script> 
  <script src="https://zhcdn01.xoyo.com/xassets/com/pf/upqiniu/assets/js/plupload.min.js"></script> 
  <script src="https://zhcdn01.xoyo.com/xassets/com/pf/upqiniu/assets/js/zh_CN.js"></script> 
  <script src="https://zhcdn01.xoyo.com/xassets/com/pf/upqiniu/assets/js/qiniu.min.js"></script> 
  <script src="assets/scripts/uploadQiniu.js"></script> 
  <script src="assets/scripts/main.js"></script> 
  <script>(function($) {
  var o = $({});
  $.subscribe = function() {
    o.on.apply(o, arguments);
  };
  $.subscribeOnce = function(name, rawFunc) {
    var func = function func() {
      $.unsubscribe.apply(null, arguments);
      rawFunc.apply(this, arguments);
    };
    $.subscribe.apply(null, [name, func]);
  };
  $.unsubscribe = function() {
    o.off.apply(o, arguments);
  };
  $.publish = function() {
    console.log(arguments[0]);
    o.trigger.apply(o, arguments);
  };
})(jQuery); (function($) {
  function detectIE() {
    var ua = window.navigator.userAgent;
    var msie = ua.indexOf('MSIE ');
    if (msie > 0) {
      // IE 10 or older => return version number
      return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);
    }

    var trident = ua.indexOf('Trident/');
    if (trident > 0) {
      // IE 11 => return version number
      var rv = ua.indexOf('rv:');
      return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);
    }

    var edge = ua.indexOf('Edge/');
    if (edge > 0) {
      // Edge (IE 12+) => return version number
      return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);
    }
    return false;
  }

  (function() {
    var currentIEVersion = detectIE();
    if (currentIEVersion) {
      $('.c-chrome-mask').each(function() {
        var ltIEVersion = +$(this).attr('data-lt-ie');
        if (currentIEVersion < ltIEVersion) {
          $(this).show();
        }
      });
    }
  })();
})($);
var _extends = Object.assign ||
  function(target) {
    for (var i = 1; i < arguments.length; i++) {
      var source = arguments[i];
      for (var key in source) {
        if (Object.prototype.hasOwnProperty.call(source, key)) {
          target[key] = source[key];
        }
      }
    }
    return target;
  };

function _classCallCheck(instance, Constructor) {
  if (! (instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

$(function() {
  /**
   * 是否支持以下API
   */
  var supports = {
    fileList: !!$('<input type="file">').prop('files'),
    blobURLs: !!window.URL && URL.createObjectURL,
    formData: !!window.FormData
  };

  /**
   * 判断是否支持 datauri
   */
  supports.datauri = supports.fileList && supports.blobURLs;

  var CropAvatar = function() {
    function CropAvatar($container) {
      _classCallCheck(this, CropAvatar);

      this.$container = $container;
      this.aspectRatio = +$container.data('aspect-ratio');
      this.$dataX = $container.find('.sal-crop-data-x');
      this.$dataY = $container.find('.sal-crop-data-y');
      this.$dataWidth = $container.find('.sal-crop-data-width');
      this.$dataHeight = $container.find('.sal-crop-data-height');
      this.$dataRotate = $container.find('.sal-crop-data-rotate');
      this.$image = $container.find('.sal-crop-image');
      this.$select = $container.find('.sal-crop-select');
      this.$selectBtn = $container.find('.sal-crop-btn');
      this.$uploadForm = $container.find('.sal-crop-upload-form');
      this.$tipLink = $container.find('.sal-crop-tip-link');
      this.$loading = $container.find('.sal-crop-loading');
      this.$preview = $container.find('.sal-crop-img-preview');
      this.supportImageFormatRegex = new RegExp('.(' + this.$container.data('support-image-formats') + ')$');
      this.init();
    }

    /**
     * 是否选中了指定的图片格式
     * @param file
     * @returns {boolean}
     */

    CropAvatar.prototype.isImageFile = function isImageFile(file) {
      if (file.type) {
        return (/^image\/\w+$/.test(file.type));
      } else {
        return this.supportImageFormatRegex.test(file);
      }
    };

    /**
     * 选择图片时触发回调
     * @param context
     */

    CropAvatar.prototype.selectChange = function selectChange(context) {
      if (supports.datauri) {
        /**
         * 定位当前的scope，即当前组件的作用域
         */
        var $root = $(this).closest('.sal-crop');
        /**
         * 当选择图片后将panel隐藏
         */
        $root.find('.sal-crop-panel').hide();
        /**
         * 移除宽度的限制
         */
        $root.find('.sal-crop-col-9').css('width', '');
        /**
         * 显示配置内容
         */
        $root.find('.sal-crop-col-3').show();
        /**
         * 拉取选择框中的文件数组对象
         */
        var files = context.$select.prop('files');
        /**
         * 判断是否有文件
         */
        if (files.length > 0) {
          /**
           * 由于是单元框的原因，直接以第一个文件为主
           */
          var file = files[0];

          if (context.isImageFile(file)) {
            if (context.url) {
              /**
               * 释放一个通过URL.createObjectURL()创建的对象URL
               */
              URL.revokeObjectURL(context.url);
            }
            /**
             * URL.createObjectURL()方法会根据传入的参数创建一个指向该参数对象的URL
             */
            context.url = URL.createObjectURL(file);
            /**
             * 开始触发裁剪
             */
            context.startCropper();
            return;
          } else {
            alert('\u8BF7\u6B63\u786E\u9009\u62E9\u56FE\u7247\u683C\u5F0F');
          }
        }
      }
      alert('\u8BF7\u5347\u7EA7\u60A8\u7684\u6D4F\u89C8\u5668\u4EE5\u652F\u6301\u5F53\u524D\u529F\u80FD');
    };

    /**
     * 将数据设置会cropper实例中
     * @param nextObj
     */

    CropAvatar.prototype.setData = function setData(nextObj) {
      var settings = this.$image.cropper('getData');
      this.$image.cropper('setData', _extends({},
        settings, nextObj));
    };

    /**
     * 设置更新cropper中的X轴
     * @param context
     */

    CropAvatar.prototype.onDataX = function onDataX(context) {
      var x = +$(this).val();
      context.setData({
        x: x
      });
    };

    /**
     * 设置更新cropper中的Y轴
     * @param context
     */

    CropAvatar.prototype.onDataY = function onDataY(context) {
      var y = +$(this).val();
      context.setData({
        y: y
      });
    };

    /**
     * 设置更新cropper中的宽度
     * @param context
     */

    CropAvatar.prototype.onDataWidth = function onDataWidth(context) {
      var width = +$(this).val();
      context.setData({
        width: width
      });
    };

    /**
     * 设置更新cropper中的高度
     * @param context
     */

    CropAvatar.prototype.onDataHeight = function onDataHeight(context) {
      var height = +$(this).val();
      context.setData({
        height: height
      });
    };

    /**
     * 设置更新cropper中的旋转
     * @param context
     */

    CropAvatar.prototype.onDataRotate = function onDataRotate(context) {
      var rotate = +$(this).val();
      context.setData({
        rotate: rotate
      });
    };

    /**
     * 上传表单提交事件
     * @param context
     */

    CropAvatar.prototype.onUploadFormSubmit = function onUploadFormSubmit(context) {
      return new Promise(function($return, $error) {
        var componentId, responseData;

        componentId = $(this).closest('.sal-crop').data('id');
        var $Try_1_Post = function() {
          try {
            return $return();
          } catch($boundEx) {
            return $error($boundEx);
          }
        };
        var $Try_1_Catch = function(e) {
          try {
            $.publish('sal-crop:error', {
              error: e,
              componentId: componentId
            });
            return $Try_1_Post();
          } catch($boundEx) {
            return $error($boundEx);
          }
        };
        try {
          return Promise.resolve(context.ajaxUpload.call(this, context)).then(function($await_4) {
              try {
                responseData = $await_4;
                $.publish('sal-crop:success', {
                  data: responseData,
                  componentId: componentId
                });
                return $Try_1_Post();
              } catch($boundEx) {
                return $Try_1_Catch($boundEx);
              }
            },
            $Try_1_Catch);
        } catch(e) {
          $Try_1_Catch(e)
        }
      }.bind(this));
    };

    /**
     * 为相关组件添加监听函数
     */

    CropAvatar.prototype.addListeners = function addListeners() {
      var context = this;

      context.$container.on('change', context.$select.selector,
        function() {
          context.selectChange.call(this, context);
        }).on('click', context.$selectBtn.selector,
        function() {
          var $select = $(this).siblings('.sal-crop-select');
          $select.click();
        }).on('click', context.$tipLink.selector,
        function() {
          $(this).closest('.sal-crop').find('.sal-crop-select').click();
        }).on('submit', context.$uploadForm.selector,
        function() {
          try {
            context.onUploadFormSubmit.call(this, context);
          } catch(e) {
            console.log(e);
          } finally {
            return false;
          }
        }).on('input', context.$dataX.selector,
        function() {
          context.onDataX.call(this, context);
        }).on('input', context.$dataY.selector,
        function() {
          context.onDataY.call(this, context);
        }).on('input', context.$dataWidth.selector,
        function() {
          context.onDataWidth.call(this, context);
        }).on('input', context.$dataHeight.selector,
        function() {
          context.onDataHeight.call(this, context);
        }).on('input', context.$dataRotate.selector,
        function() {
          context.onDataRotate.call(this, context);
        });
    };

    CropAvatar.prototype.init = function init() {
      this.addListeners();
    };

    CropAvatar.prototype.startCropper = function startCropper() {
      var context = this;
      if (context.active) {
        context.$image.cropper('replace', this.url);
      } else {
        context.$image.cropper('destroy');
        context.$image.attr('src', this.url);
        context.$image.cropper({
          aspectRatio: context.aspectRatio,
          crop: function crop(e) {
            var x = e.x,
              y = e.y,
              width = e.width,
              height = e.height,
              rotate = e.rotate;

            context.$dataX.val(Math.round(x));
            context.$dataY.val(Math.round(y));
            context.$dataWidth.val(Math.round(width));
            context.$dataHeight.val(Math.round(height));
            context.$dataRotate.val(rotate);
          },

          preview: context.$preview,
          isImageFile: function isImageFile(file) {
            if (file.type) {
              return (/^image\/\w+$/.test(file.type));
            } else {
              return (/\.(jpg|jpeg|png|gif)$/.test(file));
            }
          }
        });
        this.active = true;
      }
    };

    CropAvatar.prototype.submitStart = function submitStart() {
      this.$loading.fadeIn();
    };

    CropAvatar.prototype.submitEnd = function submitEnd() {
      this.$loading.fadeOut();
    };

    CropAvatar.prototype.ajaxUpload = function ajaxUpload(context) {
      return new Promise(function($return, $error) {
        var $Try_3_Finally = function($Try_3_Exit) {
          return function($Try_3_Value) {
            try {
              context.submitEnd();
              return $Try_3_Exit && $Try_3_Exit.call(this, $Try_3_Value);
            } catch($boundEx) {
              return $error($boundEx);
            }
          }.bind(this);
        }.bind(this);

        var fileContent, tokenData, formData;

        context.submitStart();
        var $Try_3_Post = function() {
          try {
            return $return();
          } catch($boundEx) {
            return $error($boundEx);
          }
        };
        var $Try_3_Catch = function(e) {
          try {
            throw e;
          } catch($boundEx) {
            return $Try_3_Finally($error)($boundEx);
          }
        };
        try {
          return Promise.resolve(context.canvasToBlobPromise(context.$image.cropper('getCroppedCanvas'))).then(function($await_5) {
              try {
                fileContent = $await_5;
                console.log('debug');
                return Promise.resolve(context.getTokenAjax()).then(function($await_6) {
                    try {
                      tokenData = $await_6;
                      formData = context.getFormDataFromTokenData(tokenData, fileContent);
                      return Promise.resolve(context.formPostAjax(tokenData.action, formData)).then($Try_3_Finally($return), $Try_3_Catch);
                    } catch($boundEx) {
                      return $Try_3_Catch($boundEx);
                    }
                  },
                  $Try_3_Catch);
              } catch($boundEx) {
                return $Try_3_Catch($boundEx);
              }
            },
            $Try_3_Catch);
        } catch(e) {
          $Try_3_Catch(e)
        }
      });
    };

    /**
     * 转blob
     * @param dataURI
     * @returns {Blob}
     */

    CropAvatar.prototype.dataURLtoBlob = function dataURLtoBlob(dataURI) {
      var byteString = atob(dataURI.split(',')[1]);
      var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0];
      var ab = new ArrayBuffer(byteString.length);
      var dw = new DataView(ab);
      for (var i = 0; i < byteString.length; i++) {
        dw.setUint8(i, byteString.charCodeAt(i));
      }
      return new Blob([ab], {
        type: mimeString
      });
    };

    CropAvatar.prototype.canvasToBlobPromise = function canvasToBlobPromise(canvas) {
      var _this = this;

      return new Promise(function(resolve) {
        resolve(_this.dataURLtoBlob(canvas.toDataURL()));
      });
    };

    CropAvatar.prototype.formPostAjax = function formPostAjax(url, formData) {
      return new Promise(function(resolve, reject) {
        $.ajax(url, {
          type: 'post',
          data: formData,
          processData: false,
          contentType: false,
          success: function success(_ref) {
            var status = _ref.status,
              data = _ref.data,
              message = _ref.message;

            if (status === 1
            /* 成功 */
            ) {
              resolve(data);
            } else {
              reject(message);
            }
          },
          fail: function fail(XMLHttpRequest, textStatus, errorThrown) {
            reject(textStatus || errorThrown);
          }
        });
      });
    };

    CropAvatar.prototype.getFormDataFromTokenData = function getFormDataFromTokenData(_ref2, fileContent) {
      var filename = _ref2.filename,
        extra = _ref2.extra;

      var formData = new FormData();
      formData.append(filename, fileContent);
      Object.keys(extra).forEach(function(key) {
        return formData.append(key, extra[key]);
      });
      return formData;
    };

    CropAvatar.prototype.getTokenAjax = function getTokenAjax() {
      var _this2 = this;

      return new Promise(function(resolve, reject) {
        $.ajax({
          url: '//test.ws.xoyo.com/jx3/submitpic200518/get_upload_token?type=2',
          dataType: 'jsonp',
          data: {
            'id': 1
          },
          success: function success(result) {
            if (result.status !== 1
            /* 成功 */
            ) {
              reject(result);
            } else {
              var data = result.data;

              resolve(_this2.adaptRawTokenData(data));
            }
          }
        });
      });
    };

    CropAvatar.prototype.adaptRawTokenData = function adaptRawTokenData(_ref3) {
      var action = _ref3.action,
        input_file_name = _ref3.input_file_name,
        input_values = _ref3.input_values;

      return {
        action: action,
        filename: input_file_name,
        extra: input_values
      };
    };

    return CropAvatar;
  } ();

  (function() {
    $('.sal-crop').each(function() {
      var $target = $(this);
      if ($target.data('auto-init') === true) {
        new CropAvatar($target);
      }
    });

    $.subscribe('sal-crop:init',
      function(e, dom) {
        new CropAvatar($(dom));
      });

    $.subscribe('sal-crop:success',
      function(event, _ref4) {
        var data = _ref4.data,
          componentId = _ref4.componentId;

        console.log(data);
        //        console.log(componentId);
        $('#fm-pic').attr({
          'src': data.file_link,
          'data': data.file_id
        });
        art.dialog.list['win_uploadfm'].close();
      });

    $.subscribe('sal-crop:error',
      function(event, _ref5) {
        var error = _ref5.error,
          componentId = _ref5.componentId;

        if (error.code * 1 == -10402) {
          art.dialog({
            id: 'win_uploadfm'
          }).close();
          XPASS.signin(function() {});
        } else {
          alertips(error.message);
        }
        console.log(componentId);
      });
  })();
}); (function($) {
  var o = $({});
  $.subscribe = function() {
    o.on.apply(o, arguments);
  };
  $.subscribeOnce = function(name, rawFunc) {
    var func = function func() {
      $.unsubscribe.apply(null, arguments);
      rawFunc.apply(this, arguments);
    };
    $.subscribe.apply(null, [name, func]);
  };
  $.unsubscribe = function() {
    o.off.apply(o, arguments);
  };
  $.publish = function() {
    console.log(arguments[0]);
    o.trigger.apply(o, arguments);
  };
})(jQuery);
$(function() {
  function getTemplate($root) {
    return $root.children().html();
  }

  $('.sal-crop-dialog').find('button').on('click',
    function() {
      var $root = $(this).closest('.sal-crop-dialog');
      art.dialog({
        id: 'win_uploadfm',
        lock: true,
        width: '1200px',
        init: function init() {
          // 以下代码处理边框优化样式，可参考或忽略
          var _DOM = this.DOM,
            content = _DOM.content,
            c = _DOM.c;

          $(content[0]).css({
            width: '100%',
            boxSizing: 'border-box'
          });
          var $crop = $(c[0]).find('.sal-crop');
          $.publish('sal-crop:init', $crop);
        },
        content: getTemplate($root)
      });
    });
});</script> 
  <script>initupload();</script>  
  
 </body>
</html>