<!--index.wxml-->
<view class="container">
    <head assets="{{assets}}"></head>
    <view class="p-r tab-container">
        <image class="tab-bg" src="{{assets + 'images/tab_bg.png'}}"></image>
        <image class="p-a tab-item-active tab-active-{{currentIndex}}" src="{{assets + 'images/tab_active.png'}}">
        </image>
        <view class="p-a flex-wrap tab-list">
            <view class="flex-1 t-c tab-item" bindtap="clickTap" data-idx='1'>经典</view>
            <view class="flex-1 t-c tab-item" bindtap="clickTap" data-idx='2'>极速</view>
            <view class="flex-1 t-c tab-item" bindtap="clickTap" data-idx='3'>军团</view>
            <view class="flex-1 t-c tab-item" bindtap="clickTap" data-idx='4'>娱乐</view>
        </view>
        <view class="overview-container overview-tab-{{currentIndex}}">
            <view class="overview-tab" 
                wx:for="{{overviewData}}" 
                wx:for-index="tabIdx" 
                wx:for-item="tabitem">
                <view class="flex-wrap flex-between overview-list {{!tabitem.isOpen ? 'active' : ''}}">
                    <block 
                        wx:for="{{tabitem.dataList}}" 
                        wx:for-index="listIdx" wx:for-item="listItem">
                        <block wx:if="{{!listItem.isThreeMenu}}">
                            <view class="p-r overview-item">
                                <image class="overview-bg" 
                                    src="{{assets + 'images/overview_bg.jpg'}}">
                                </image>
                                <view class="p-a t-c overview-wrap">
                                    <text class="overview-msg-text">{{listItem.value}}</text>
                                    <text class="overview-title-text">{{listItem.name}}</text>
                                </view>
                            </view>
                        </block>
                        <block wx:if="{{listItem.isThreeMenu}}">
                            <view class="flex-wrap flex-between group-wrap">
                                <view class="p-r overview-group">
                                    <image class="overview-group-bg" 
                                        src="{{assets + 'images/overview_title_border.png'}}">
                                    </image>
                                    <view class="p-a t-c overview-group-wrap">
                                        <text class="overview-group-text">{{listItem.name}}</text>
                                    </view>
                                </view>
                                <view class="p-r overview-item"
                                    wx:for="{{listItem.threeDataList}}"
                                    wx:for-index="threeIdx"
                                    wx:for-item="threeItem">
                                    <image class="overview-bg" 
                                        src="{{assets + 'images/overview_bg.jpg'}}">
                                    </image>
                                    <view class="p-a t-c overview-wrap">
                                        <text class="overview-msg-text">{{threeItem.value}}</text>
                                        <text class="overview-title-text">{{threeItem.name}}</text>
                                    </view>
                                </view>
                            </view>
                        </block>
                    </block>
                </view>
                <!-- 点击展开 -->
                <view class="open-list-btn flex-wrap flex-center" 
                    bindtap="openHeight" data-idx="{{tabIdx}}">
                    <text>展开</text>
                    <image class="arrow-icon" src="{{assets + 'images/open_arrow.png'}}"></image>
                </view>
            </view>
        </view>
    </view>
    <!-- 功能 -->
    <view class="flex-wrap flex-between menu-list plank-wrap">
        <navigator class="t-c menu-item" url="#">
            <image class="menu-icon" src="{{assets + 'images/menu_1.png'}}"></image>
            <text class="menu-text">竞技大数据</text>
        </navigator>
        <navigator class="t-c menu-item" url="#">
            <image class="menu-icon" src="{{assets + 'images/menu_2.png'}}"></image>
            <text class="menu-text">竞技大神</text>
        </navigator>
        <navigator class="t-c menu-item" url="#">
            <image class="menu-icon" src="{{assets + 'images/menu_3.png'}}"></image>
            <text class="menu-text">图鉴及教学</text>
        </navigator>
        <navigator class="t-c menu-item" url="#">
            <image class="menu-icon" src="{{assets + 'images/menu_4.png'}}"></image>
            <text class="menu-text">游戏下载</text>
        </navigator>
    </view>
    <!-- 近20场比赛 -->
    <block
        wx:for="{{overviewData}}" 
        wx:for-index="idx1" 
        wx:for-item="item1">
        <view class="plank-wrap" 
            wx:if="{{currentIndex == idx1+1}}" >
            <view class="flex-wrap flex-between group-rank-title">
                <view class="flex-wrap">
                    <view class="group-label group-label-{{idx1+1}}">{{item1.name}}</view>
                    <view class="group-rank-text">近<text>20</text>场比赛</view>
                </view>
                <view class="group-rank-text">
                    场均排名<text>{{item1.recentRecord.average}}</text>
                </view>
            </view>
            <image class="fenge-line" src="{{assets + 'images/fenge_line.png'}}"></image>
            <view class="p-r flex-wrap flex-between t-c rank-list">
                <block 
                    wx:for="{{item1.recentRecord.data}}" 
                    wx:for-index="idx2" 
                    wx:for-item="item2">
                    <view class="rank-item {{item2 > 4 ? 'down' : 'up'}}">{{item2}}</view>
                </block>
            </view>
        </view>
    </block>
    <view class="plank-wrap ls-record-wrap">
        <view class="flex-wrap flex-between">
            <text class="plank-title-text">历史战绩</text>
            <navigator class="p-r btn-wrap btn-look-flock" url="#">
                <image src="{{assets + 'images/lool_rank_btn.png'}}" mode="aspectFill">
                </image>
                <text class="p-a btn-text t-c">查看我的群排名</text>
            </navigator>
        </view>
        <!-- 战绩列表 -->
        <view class="flex-wrap t-c ls-record-title">
            <text class="ls-title-text ls-item-1">排名</text>
            <text class="p-r flex-1 ls-title-text ls-item-2">阵容</text>
            <text class="ls-title-text ls-item-3">羁绊</text>
        </view>
        <view class="t-c ls-record-list">
            <view class="flex-wrap flex-between ls-record-item">
                <view class="ls-item-1">
                    <view class="group-label group-label-1">极速对决</view>
                    <text class="ls-num-text">1</text>
                </view>
                <view class="ls-item-2 flex-1">
                    <text class="ls-time-text">2019.09.18 19:12</text>
                    <view class="flex-wrap zhenr-list">
                        <image class="zhenr-icon" src="{{assets + 'images/zhenr_1.jpg'}}"></image>
                        <image class="zhenr-icon" src="{{assets + 'images/zhenr_1.jpg'}}"></image>
                        <image class="zhenr-icon" src="{{assets + 'images/zhenr_1.jpg'}}"></image>
                        <image class="zhenr-icon" src="{{assets + 'images/zhenr_1.jpg'}}"></image>
                        <image class="zhenr-icon" src="{{assets + 'images/zhenr_1.jpg'}}"></image>
                        <image class="zhenr-icon" src="{{assets + 'images/zhenr_1.jpg'}}"></image>
                        <image class="zhenr-icon" src="{{assets + 'images/zhenr_1.jpg'}}"></image>
                        <image class="zhenr-icon" src="{{assets + 'images/zhenr_1.jpg'}}"></image>
                        <image class="zhenr-icon" src="{{assets + 'images/zhenr_1.jpg'}}"></image>
                        <image class="zhenr-icon" src="{{assets + 'images/zhenr_1.jpg'}}"></image>
                    </view>
                </view>
                <view class="ls-item-3"></view>
            </view>
        </view>
    </view>
</view>