<!doctype html>
<html lang="zh-cn">
<head>
    <meta charset="gbk">
    <meta name="Description" content="试试你能到几层" />
    <meta name="Keywords" content="love" />
    <meta content="telephone=no" name="format-detection">
    <meta content="yes" name="mobile-web-app-capable">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <script>
        //屏幕适应
        (function (win, doc) {
            if (!win.addEventListener) return;
            var html = document.documentElement;
            function setFont() {
                var html = document.documentElement;
                var k = 750;
                html.style.fontSize = html.clientWidth / k * 100 + "px";
            }
            setFont();
            setTimeout(function () {
                setFont();
            }, 300);
            doc.addEventListener('DOMContentLoaded', setFont, false);
            win.addEventListener('resize', setFont, false);
            win.addEventListener('load', setFont, false);
        })(window, document);
    </script>
    <title>DIY你的男友</title>
    <!-- 页面设计: cp | 页面制作： cp | 创建： 2020/04/27 -->
    <link href="./ossweb-img/index.css" rel="stylesheet" />
</head>

<body>
<div class="p-r stage">
    <!-- 音乐 -->
    <!-- <audio id="musicBgm" loop>
        <source src="./ossweb-img/music.mp3" type="audio/mpeg" />
    </audio> -->
    <!-- p1 首屏 -->
    <div class="p-a part part-1 load-status" style="display: none;">
        <div class="p-r wrap">
            
        </div>
    </div>
    <!-- p2 选取一种基底 -->
    <div class="p-a part part-2 part-init part-show">
        <div class="p-r wrap">
            <div class="full-img title-icon">
                <img src="./ossweb-img/p2_title.png" alt="标题">
            </div>
            <div class="p-r bg select-container">
                <ul class="select-list flex">
                    <li class="bg select-item active"></li>
                    <li class="bg select-item"></li>
                    <li class="bg select-item"></li>
                    <li class="bg select-item"></li>
                    <li class="bg select-item"></li>
                    <li class="bg select-item"></li>
                    <li class="bg select-item"></li>
                    <li class="bg select-item"></li>
                    <li class="bg select-item"></li>
                </ul>
                <div class="p-a full-img select-img">
                    <img src="./ossweb-img/p2_select_img.png" alt="饮料">
                </div>
            </div>
            <div class="bg tips-msg-text t-c"><p>沉浸的爱，倾慕与浪漫<br/>优雅的心，和君子般的风度</p></div>
            <div class="select-btn-container flex flex-center">
                <a href="javascript: alert('敬请期待！');" class="icons btn-prev btn-hover t">下一步</a>
            </div>
        </div>
    </div>
    <!-- p3 加入3种果汁 -->
    <div class="p-a part part-3 part-init" style="display: none;">
        <div class="p-r wrap">
            <div class="full-img title-icon">
                <img src="./ossweb-img/p3_title.png" alt="标题">
            </div>
            <div class="p-r bg select-container">
                <ul class="p-r select-list flex">
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                </ul>
                <div class="p-a full-img select-img">
                    <img src="./ossweb-img/p3_select_img.png" alt="饮料">
                </div>
            </div>
            <div class="bg tips-msg-text t-c"><p>后院的秋千装着午后的阳光<br/>像填满糖果的糖果罐一样满满当当</p></div>
            <div class="select-btn-container flex flex-center">
                <a href="javascript: alert('敬请期待！');" class="icons btn-prev btn-hover t">上一步</a>
                <a href="javascript: alert('敬请期待！');" class="icons btn-next btn-hover t">下一步</a>
            </div>
        </div>
    </div>
    <!-- p4 再配上3款佐料 -->
    <div class="p-a part part-4 part-init" style="display: none;">
        <div class="p-r wrap">
            <div class="full-img title-icon">
                <img src="./ossweb-img/p4_title.png" alt="标题">
            </div>
            <div class="p-r bg select-container">
                <ul class="p-r select-list flex">
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                    <li class="p-a bg select-item"></li>
                </ul>
                <div class="p-a full-img select-img">
                    <img src="./ossweb-img/p4_select_img.png" alt="饮料">
                </div>
            </div>
            <div class="bg tips-msg-text t-c"><p>每一个街角都氤氲着甜蜜的美好</p></div>
            <div class="select-btn-container flex flex-center">
                <a href="javascript: alert('敬请期待！');" class="icons btn-prev btn-hover t">上一步</a>
                <a href="javascript: alert('敬请期待！');" class="icons btn-next btn-hover t">下一步</a>
            </div>
        </div>
    </div>
    <!-- p5结果 -->
    <div class="p-a part part-5 part-init" style="display: none;">
        
    </div>
    

</div>
<script src="//ossweb-img.qq.com/images/js/mobile_build/util/zepto.js"></script>
<script src="//ossweb-img.qq.com/images/js/mobile_bundle/milo.js"></script>
<script src="//ossweb-img.qq.com/images/js/TGMobileShare/TGMobileShare.min.js"></script>
<script src="//game.gtimg.cn/images/js/dom2img/1.0.min.js"></script>
<script src="./ossweb-img/qrcode.js" type="text/javascript"></script>
<script>
    
    $(".stage").css("font-family", 'hyzy');
    // TGDialogS('posterPop');
    function TGDialogS(e) {
        // 利用milo库引入dialog组件
        need("biz.dialog", function (Dialog) {
            Dialog.show({
                id: e,
                bgcolor: '#000', //弹出“遮罩”的颜色，格式为"#FF6600"，可修改，默认为"#fff"
                opacity: 50 //弹出“遮罩”的透明度，格式为｛10-100｝，可选
            });
        });
    }
    function closeDialog() {
        // 利用milo库引入dialog组件
        need("biz.dialog", function (Dialog) {
            Dialog.hide();
        });
    }

    $(function(){
        //播放音乐
        var music = document.getElementById('musicBgm');
        var musicStatus = sessionStorage.getItem("musicTwitch");
        //音乐开关
        var switchMusic = $(".music-btn");
        if( musicStatus == 1 ){
            switchMusic.removeClass("off");
            music.play();
            $(window).one('touchstart', function () {
                music.play();
            });
            //微信下兼容处理
            document.addEventListener("WeixinJSBridgeReady", function () {
                music.play();
            }, false);
        }

        switchMusic.on("click", function () {
            switchMusic.removeClass('scale-ani');
            if (switchMusic.hasClass('off')) {
                music.play();
                switchMusic.removeClass("off");
                sessionStorage.setItem("musicTwitch", 1);
            } else {
                music.pause();
                switchMusic.addClass("off");
                sessionStorage.setItem("musicTwitch", 0);
            }
        });

        //加载帧图
        var imgList = [
            './ossweb-img/p1_bg.jpg',
        ];

        function loadImg() {
            var that = this,
                imgLoad = 0,
                pro = 0,
                $loadText = $(".J-pro-text"),
                $progress = $(".J-pro-wrap");
            imgList.forEach(function (ev, index) {
                var img = new Image();
                img.src = ev;
                img.style.position = 'absolute';
                img.idx = index;
                img.onload = function () {
                    imgList[this.idx].obj = this;
                    imgLoad++;
                    pro = parseInt((imgLoad / imgList.length) *.95 * 100);
                    $loadText.text(pro + '%');
                    $progress.css('width', pro+'%');
                    if (imgLoad >= imgList.length) {
                        console.log('加载完成');
                        document.fonts.ready.then(function() {
                            // 字体加载完成
                            $(".stage").css("font-family", 'hyzy');
                            $loadText.text('100%');
                            $progress.css('width', '100%');
                            //图片显示
                            showImg();
                            setTimeout(function(){
                                // 直接进入徽章选择
                                $(".part-1").removeClass('load-status')
                                    .css('background-image', 'url(./ossweb-img/p1_bg.gif)');
                                nextPageRead(1);
                            }, 500);
                        });
                    }
                }
            });
        }
        // loadImg();

        //图片显示
        var $imgList = $("img");
        function showImg(){
            $imgList.each(function(idx, ev){
                var $ev = $(ev),
                    src = $ev.attr('data-src');
                if(src != null){
                    $ev.attr('src', src);
                }
            });
        }
    });


    //下一页准备
    function nextPageRead(idx){
        $(".part-"+idx).css('top', '0%');
        if(idx<5){
            var i = idx+1;
            $(".part-"+i).css('top', '100%').show();
            setTimeout(function(){
                $(".part-"+idx).addClass("part-show");
            }, 100);
        }
    }

    //点击弹窗空白处关闭
    $("body").on("touchstart", "#_overlay_", function(){
        if($("#orderSuccess").css('display') != 'none'){
            nextPageRead(2);
        }
        closeDialog();
    });

</script>
<script src="./ossweb-img/index.js"></script>
<script src="//ossweb-img.qq.com/images/js/PTT/ping_tcss_tgideas_https_min.js"></script>
<!--引入文件-->
<script type="text/javascript" src="//ossweb-img.qq.com/images/ams/atm/reporting.js"></script>
<!--<script src="vconsole.min.js" ></script>-->
<!--<script src="action.js"></script>-->
<script>
    TGMobileShare({
        shareTitle:'DIY你的男友',
        shareDesc:'DIY你的男友',
        shareImgUrl:'./ossweb-img/share-icon.jpg', //分享图片尺寸200*200，且填写绝对路径
        shareLink:'https://love.qq.com/cp/a20200608diyny/index.html',
        actName:'a20200608diyny'
    });
    // var vConsole = new VConsole();

</script>

<script>
    //此段代码不能放到外链JXXXXS中，
    var setSite = { //设置网站属性    
        siteType: "a20200608diyny", //必填项:"os"代表是官网，如果不是，则填写actName例如a20160701xxx
        pageType: "m", //必填项:本页面的定位；按照页面含义填写例如main||list||detail||download||share||page1||pageN
        pageName: "移动端首页", //必填项:页面中文名
        osact: 0, //选填项:是否是官网专题(在官网运营的专题)boolean；默认是0；可以在链接上加入参数osact=1来灵活设置
        ingame: 0, //选填项:是否投放在游戏APP内boolean；默认是0；可以在链接上加入参数ingame=1来灵活设置
        stayTime: 1 //选填项:是否需要统计停留时长boolean；默认是1
    }
    if (typeof (pgvMain) == 'function') pgvMain(); //千万不能忘记！
</script>
</body>


</html>