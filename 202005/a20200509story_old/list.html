

<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge;chrome=1">
<meta name="renderer" content="webkit">
<!-- 保证移动端页面能够展示完整页面 -->
<meta name="viewport" content="width=device-width, maximum-scale=1.0">
<meta name="keywords" content="剑网3 剑网3推栏 剑网3推栏小说大赛 剑网3同人嘉年华 剑网3十周年">
<meta name="description" content="《剑网3推栏》是剑网3官方实用APP，剑网3推栏小说大赛已上线。剑网3推栏将为您提供实时分析竞技场数据、配装器工具。游戏聊天频道互通，世界频道、密聊频道、好友频道、门派频道、阵营频道,绑定游戏账号增加轻功气力值上限。">
<meta name="publish-date" content="Sat May 09 2020 16:19:26 GMT+0800 (中国标准时间)">
<meta name="author" content="黄日欣">

  <title>作品列表-剑网3推栏小说大赛_剑网3十周年_剑网3同人嘉年华-剑网3官网</title>
  
  
  <!--外部css资源从这里开始-->
<link class="external" href="//zhcdn01.xoyo.com/xassets/com/pf/reset/reset.css" rel="stylesheet">
<link href="//zhcdn01.xoyo.com/assets/lib/dialog/artDialog/skins/001/ui.css" class="external" rel="stylesheet">

  <!-- build:css assets/css/bundles.build.css -->
<link rel="stylesheet" href="assets/css/style.css">
<!-- endbuild -->
<style>#jx3-top-navi-bar {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  overflow: hidden;
  height: 0;
}
#jx3-top-navi-bar ~ .ie-warning {
  padding-top: 80px;
}

.global-click-btn {
  width: 100%;
  height: 100%;
  display: block;
}
.layout-wrapper {
  margin-top: 50px;
  left: 0;
  right: 0;
}
.layout-wrapper-container {
  width: 100%;
}

.menu-rig-pop {
  position: fixed;
  right: 0;
  top: 50%;
  margin: -317px 0 0;
  width: 118px;
  height: 634px;
  background: url(assets/images/btn-rig-pop.png) no-repeat;
  z-index: 10;
  display: none;
}
.menu-rig-pop-menu {
  float: left;
  padding: 68px 0 0;
  width: 100%;
}
.menu-rig-pop-menu li {
  float: left;
  position: relative;
  display: block;
  width: 100%;
  height: 40px;
}
.menu-rig-pop-menu li a {
  display: block;
  width: 100%;
  text-indent: -9999em;
  height: 100%;
}
.menu-rig-pop-menu li a:hover,
.menu-rig-pop-menu li .menu-rig-pop-cur {
  background: url(assets/images/btn-rig-pop.png) no-repeat;
}
.menu-rig-pop-menu .menu-rig-pop-menu01 {
  height: 74px;
}
.menu-rig-pop-menu .menu-rig-pop-menu12 {
  position: relative;
  height: 74px;
}
.menu-rig-pop-menu .menu-rig-pop-menu01 a:hover {
  background-position: -147px -69px;
}
.menu-rig-pop-menu .menu-rig-pop-menu02 a:hover {
  background-position: -147px -143px;
}
.menu-rig-pop-menu .menu-rig-pop-menu03 a:hover {
  background-position: -147px -183px;
}
.menu-rig-pop-menu .menu-rig-pop-menu04 a:hover {
  background-position: -147px -223px;
}
.menu-rig-pop-menu .menu-rig-pop-menu05 a:hover {
  background-position: -147px -263px;
}
.menu-rig-pop-menu .menu-rig-pop-menu06 a:hover {
  background-position: -147px -303px;
}
.menu-rig-pop-menu .menu-rig-pop-menu07 a:hover {
  background-position: -147px -343px;
}
.menu-rig-pop-menu .menu-rig-pop-menu08 a:hover {
  background-position: -147px -383px;
}
.menu-rig-pop-menu .menu-rig-pop-menu09 a:hover {
  background-position: -147px -423px;
}
.menu-rig-pop-menu .menu-rig-pop-menu10 a:hover {
  background-position: -147px -463px;
}
.menu-rig-pop-menu .menu-rig-pop-menu11 a:hover {
  background-position: -147px -503px;
}
.menu-rig-pop-menu .menu-rig-pop-menu12 a:hover {
  background-position: -147px -543px;
}
.menu-rig-pop-menu .menu-rig-pop-menu08 .menu-rig-pop-cur,
.menu-rig-pop-menu .menu-rig-pop-menu08 .menu-rig-pop-cur:hover {
  background-position: -277px -383px;
}
.menu-rig-pop-menu .menu-rig-pop-menu12 .menu-rig-pop-wx-code {
  display: none;
  position: absolute;
  left: -115px;
  top: -421px;
}
.menu-rig-pop-menu .menu-rig-pop-menu12:hover .menu-rig-pop-wx-code {
  display: block;
}
.menu-rig-pop-menu-pop {
  display: none;
  padding: 12px 2px 0;
  position: absolute;
  left: -88px;
  top: -31px;
  width: 87px;
  height: 103px;
  background: url(assets/images/btn-rig-small.png) no-repeat;
}
.menu-rig-pop-menu-pop dd {
  float: left;
  margin: 0 0 0 7px;
  width: 68px;
  height: 27px;
  text-align: center;
  line-height: 27px;
}
.menu-rig-pop-menu-pop dd a {
  text-indent: 0;
  font-size: 12px;
  color: #2d8dc9;
}
.menu-rig-pop-menu-pop dd a:visited {
  color: #2d8dc9;
}
.menu-rig-pop-menu .menu-rig-pop-menu-pop dd a:hover {
  width: 68px;
  display: block;
  text-decoration: none;
  height: 27px;
  background: none;
  color: #006ab7;
}
.menu-rig-pop-menu .menu-rig-pop-menu-pop dd .menu-rig-pop-cur-s,
.menu-rig-pop-menu .menu-rig-pop-menu-pop dd .menu-rig-pop-cur-s:hover {
  width: 68px;
  display: block;
  text-decoration: none;
  height: 27px;
  color: #fff;
  background: url(assets/images/btn-rig-small-hover.png) center center no-repeat;
}

.popupGlo {
  /*滚动条整体样式*/
  /*滚动条滑块*/
  /*滚动条轨道*/
}
.popupGlo-mask {
  position: fixed;
  display: none;
  top: 0;
  left: 0;
  background: #000;
  width: 100%;
  height: 10000px;
  opacity: .6;
  z-index: 200;
}
.popupGlo-tips-wrap {
  position: fixed;
  display: none;
  top: 20%;
  left: 50%;
  padding: 25px 0 28px;
  margin-left: -200px;
  width: 400px;
  background: #fff;
  border-radius: 3px;
  z-index: 201;
}
.popupGlo-rule {
  position: absolute;
  display: none;
  top: 10px;
  left: 50%;
  padding: 25px 0 20px;
  margin-left: -400px;
  width: 800px;
  border-radius: 3px;
  z-index: 201;
  /*background:#fff url(assets/images/rule-pop.jpg) center top no-repeat;*/
  background: #fff;
  overflow: hidden;
}
.popupGlo-tips-text {
  margin: 0 auto;
  padding: 0 0 20px;
  width: 320px;
  font-size: 20px;
  line-height: 30px;
  text-align: center;
  color: #595959;
}
.popupGlo-btn-wrap {
  width: 100%;
  text-align: center;
}
.popupGlo-btn {
  display: inline-block;
  margin: 0 auto;
  padding: 0 30px;
  height: 40px;
  line-height: 40px;
  text-align: center;
  background: #67e3e0;
  color: #fff;
  font-size: 18px;
  border-radius: 25px;
  cursor: pointer;
}
.popupGlo-btn:hover {
  background: #00d1d4;
}
.popupGlo-rule-wrap {
  width: 100%;
}
.popupGlo-rule-btn {
  display: block;
  margin: 0 auto;
  width: 340px;
  height: 50px;
  background: #62e3df;
  text-align: center;
  border-radius: 25px;
  color: #fff;
  line-height: 50px;
  cursor: pointer;
  font-size: 22px;
}
.popupGlo-rule-btn:hover {
  text-decoration: none;
  background: #00d5d7;
}
.popupGlo-rule-close {
  position: absolute;
  top: 0;
  right: 0;
  width: 50px;
  height: 32px;
  cursor: pointer;
  background: url(assets/images/rule/close.png) 21px 4px no-repeat;
}
.popupGlo-rule-box {
  padding: 0 20px;
  margin: 0 auto;
  width: 702px;
  height: 800px;
  overflow-x: hidden;
  overflow-y: auto;
  text-align: left;
}
.popupGlo-rule-box::-webkit-scrollbar {
  width: 8px;
  height: 1px;
}
.popupGlo-rule-box::-webkit-scrollbar-thumb {
  border-radius: 10px;
  -webkit-box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.2);
  background: #535353;
}
.popupGlo-rule-box::-webkit-scrollbar-track {
  -webkit-box-shadow: inset 0 0 1px rgba(0, 0, 0, 0);
  border-radius: 10px;
  background: #ccc;
}
.popupGlo-rule-top {
  height: 70px;
}
.popupGlo-rule-top-tit {
  margin: 0 auto;
  width: 702px;
  background: url(assets/images/rule/tit.png) center 10px no-repeat;
  border-bottom: #efefef solid 1px;
  text-indent: -9999em;
  height: 55px;
}
.popupGlo-rule-tit {
  margin: 0;
  height: 44px;
  font-size: 20px;
  line-height: 44px;
  color: #434343;
}
.popupGlo-rule-txt {
  margin: 0;
  font-size: 14px;
  line-height: 24px;
  color: #444;
}
.popupGlo-rule-txt span {
  color: #be9100;
}
.popupGlo-rule-txt strong {
  font-weight: 400;
  color: #fe0034;
}
.popupGlo-rule-txt a,
.popupGlo-rule-txt a:visited {
  color: #fe0034;
}
.popupGlo-rule-txt a:hover {
  text-decoration: none;
}
.popupGlo-rule-line {
  display: block;
  width: 100%;
  height: 10px;
  border-bottom: #efefef solid 1px;
}

body {
  background: #f0f0f0;
}
.blank {
  display: block;
  height: 0;
  line-height: 0;
  font-size: 0;
  clear: both;
  overflow: hidden;
}
.h20 {
  height: 20px;
}
.page {
  margin: 0 auto;
  width: 1222px;
}
body #jx3-top-navi-bar .inner-i {
  width: 1222px;
}
body #jx3-top-navi-bar {
  background: #1d2327;
}
body #jx3-top-navi-bar .t-links a {
  color: #66696b;
}
body #jx3-top-navi-bar .t-links a.hlight {
  color: #959697;
}
body #jx3-top-navi-bar .t-links a.hlight:hover {
  color: #959697;
}
body #jx3-top-navi-bar .t-links a:hover {
  background: none;
  color: #66696b;
}
.index-page-header {
  position: relative;
}
.index-page-section-container {
  width: 1200px;
  margin: 0 auto;
  position: relative;
}
.index-page-pop-box {
  margin: 0 auto;
  width: 1222px;
}

.head-menu {
  width: 100%;
  background: #65e3e0 url(assets/images/bg-nav.jpg) center top no-repeat;
  height: 60px;
  line-height: 60px;
  /* &-join-btn:hover .detail {
       width: 100%;
       position: relative;
       z-index: 100;
       .up-arrow {
         width: 130px;
         height: 18px;
         background: url(assets/images/up-arrow.png) center bottom no-repeat;
         margin: auto;
       }
       .detail-content {
         background-color: #242a2e;
         height: 90px;
         width: 290px;
         position: absolute;
         top: 8px;
         right: 0px;
         border-radius: 4px;
         .get-peize {
           position: absolute;
           display: block;
           width: 57px;
           height: 55px;
           left: 16px;
           top: 19px;
           background: url(assets/images/get-prize.png);
           background-size: cover;
         }
         .notice {
           position: absolute;
           display: block;
           width: 56px;
           height: 54px;
           top: 19px;
           left: 86px;
           background: url(assets/images/notice.png);
         }
         .works-manage {
           position: absolute;
           display: block;
           width: 57px;
           height: 54px;
           left: 157px;
           top: 19px;
           background: url(assets/images/works-manage.png);
         }
         .works-upload {
           position: absolute;
           display: block;
           left: 230px;
           top: 19px;
           width: 34px;
           height: 54px;
           background: url(assets/images/works-upload.png);
         }
         .banner-1 {
           position: absolute;
           width: 1px;
           height: 54px;
           left: 79px;
           top: 20px;
           background-color: #67e4e0 ;
           opacity: 0.3;
         }
         .banner-2 {
           position: absolute;
           width: 1px;
           height: 54px;
           left: 150px;
           top: 20px;
           background-color: #67e4e0 ;
           opacity: 0.3;
         }
         .banner-3 {
           position: absolute;
           width: 1px;
           height: 54px;
           left: 220px;
           top: 20px;
           background-color: #67e4e0 ;
           opacity: 0.3;
         }
       }
     }
     &-join-btn:hover {
       text-decoration: none;
       overflow: visible;
     }*/
}
.head-menu-menu {
  float: left;
  width: 690px;
}
.head-menu-menu li {
  position: relative;
  margin-right: 40px;
  padding: 0 4px;
  line-height: 60px;
  font-size: 16px;
  display: inline-block;
}
.head-menu-menu a {
  color: #2d4d4d;
}
.head-menu-menu a:visited {
  color: #2d4d4d;
}
.head-menu-menu span {
  display: none;
}
.head-menu-menu-on {
  font-weight: 700;
  color: #020202;
}
.head-menu-menu-on a {
  color: #020202;
}
.head-menu-menu-on a:visited {
  color: #020202;
}
.head-menu-menu a:hover {
  text-decoration: none;
}
.head-menu-menu-on span {
  display: block;
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 12px;
  background: url(assets/images/menu-top-on.png) center top no-repeat;
}
.head-menu-right {
  float: right;
  position: relative;
  width: 485px;
  height: 60px;
}
.head-menu-search {
  /* float: left;
      width: 202px;
      height: 60px;
      background: url(assets/images/bg-search.png) left center no-repeat;
      float: left; */
  width: 203px;
  height: 38px;
  background-color: #b2f0ef;
  margin-top: 12px;
  border-radius: 35px;
  position: absolute;
  right: 269px;
  top: 0;
}
.head-menu-search[focus='true'] {
  /* float: left;
      width: 202px;
      height: 60px;
      background: url(assets/images/bg-search.png) left center no-repeat;
      float: left; */
  width: 351px;
  height: 38px;
  background-color: white;
  margin-top: 12px;
  border-radius: 35px;
  position: absolute;
  right: 269px;
  top: 0;
}
.head-menu-search[focus='true'] .head-menu-search-input {
  float: left;
  padding: 11px 0 0 18px;
  font-size: 16px;
  color: #566d6d;
  width: 295px;
  background: none;
  border: 0 none;
  -o-text-overflow: ellipsis;
     text-overflow: ellipsis;
}
.head-menu-search-input {
  float: left;
  padding: 11px 0 0 18px;
  font-size: 16px;
  color: #566d6d;
  width: 145px;
  background: none;
  border: 0 none;
  -o-text-overflow: ellipsis;
     text-overflow: ellipsis;
}
.head-menu-search-btn {
  display: block;
  float: right;
  width: 19px;
  height: 19px;
  cursor: pointer;
  background: url(assets/images/search-btn-bg.png);
  background-size: 100% auto;
  margin-top: 10px;
  margin-right: 10px;
}
.head-menu-avatar {
  display: none;
  position: absolute;
  margin-left: 32px;
  width: 96px;
  height: 60px;
  line-height: 60px;
  color: #2e5151;
  background: url(assets/images/avatar.png) left center no-repeat;
  text-align: right;
  left: 202px;
  top: 0;
}
.head-menu-avatar span {
  cursor: pointer;
}
.head-menu-join-btn {
  display: block;
  position: absolute;
  right: 0;
  top: 0;
  width: 130px;
  height: 64px;
  background: #242a2e url(assets/images/icon-join-btn.png) center top no-repeat;
  color: #67e4e0;
  font-weight: 700;
  line-height: 54px;
  text-align: center;
  font-size: 20px;
  border-bottom-left-radius: 5px;
  border-bottom-right-radius: 5px;
  text-decoration: none;
  z-index: 10;
}

.banner {
  width: 100%;
  background: url(assets/images/banner.jpg) center top no-repeat;
  height: 590px;
  margin-bottom: 18px;
}
.banner-box {
  padding: 377px 0 0 582px;
  width: 490px;
  height: 62px;
}

.menu-banner-top-box {
  padding: 400px 0 0 706px;
  width: 490px;
  height: 62px;
}
.menu-banner-top-menu {
  width: 100%;
  height: 100%;
  background: url(assets/images/menu-banner.png) no-repeat;
}
.menu-banner-top-menu ul {
  display: block;
  padding: 0 0 0 10px;
}
.menu-banner-top-menu li {
  float: left;
  width: 160px;
}
.menu-banner-top-menu a {
  display: block;
  width: 100%;
  height: 62px;
  text-indent: -9999em;
}
.menu-banner-top-menu a:hover {
  background: url(assets/images/menu-banner.png) no-repeat;
}
.menu-banner-top-menu01 {
  width: 170px;
}
.menu-banner-top-menu01 a:hover {
  background-position: -10px -62px;
}
.menu-banner-top-menu02 a:hover {
  background-position: -170px -62px;
}
.menu-banner-top-menu03 a:hover {
  background-position: -330px -62px;
}

.index-pubu {
  min-height: 500px;
  width: 100%;
}
.index-pubu-link {
  display: block;
  width: 228px;
  height: 118px;
}
.index-pubu-rank-box {
  padding: 8px 0 16px;
  width: 100%;
  height: 24px;
  line-height: 24px;
  color: #999;
}
.index-pubu-rank {
  padding: 0 0 0 520px;
  overflow: hidden;
  width: 225px;
  height: 24px;
  /*background: url(assets/images/icon-arrow.png) 585px 1px no-repeat;*/
}
.index-pubu-rank li {
  float: left;
  width: 85px;
  text-align: center;
  line-height: 24px;
  cursor: pointer;
  position: relative;
}
.index-pubu-rank li .device-line {
  height: 20px;
  width: 1px;
  background-color: #d8d8d8;
  position: absolute;
  right: 0;
  top: 3px;
}
.index-pubu-rank li .arror {
  width: 7px;
  height: 14px;
  background: url("assets/images/arror.png");
  position: absolute;
  top: 5px;
  left: 61px;
  opacity: 0.5;
}
.index-pubu-author {
  margin: 0 auto;
  position: relative;
  overflow: visible;
  width: 255px;
  font-size: 14px;
  color: #a0968a;
}
.index-pubu-author a,
.index-pubu-author a:visited {
  color: #a0968a;
}
.index-pubu-author-name {
  display: block;
  float: left;
  height: 28px;
  line-height: 28px;
  text-indent: 5px;
  overflow: hidden;
  white-space: nowrap;
  -o-text-overflow: ellipsis;
     text-overflow: ellipsis;
  width: 195px;
}
.index-pubu-author-img {
  float: left;
  overflow: hidden;
  display: block;
  width: 27px;
  height: 27px;
  border-radius: 50%;
}
.index-pubu-author-img img {
  display: block;
  margin: 0 auto;
  height: 27px;
}
.index-pubu-author-support {
  position: absolute;
  right: 0;
  top: 0;
  padding-left: 25px;
  line-height: 28px;
  display: inline-block;
  background: #ffffff url(assets/images/support-off.png) left 2px no-repeat;
  white-space: nowrap;
  height: 30px;
  font-size: 12px;
  color: #a3a3a3;
  cursor: pointer;
}
.index-pubu-rank-cur {
  font-weight: 700;
  color: #000;
}
.index-pubu-rank-cur .arror {
  opacity: 1 !important;
}
.index-pubu-search-nav {
  overflow: hidden;
  margin-bottom: 30px;
  font-size: 18px;
  height: 38px;
  line-height: 38px;
  border-bottom: #e0e0e0 solid 1px;
  color: #858585;
}
.index-pubu-search-back {
  background: url(assets/images/icon-back-off.png) left 11px no-repeat;
  text-align: right;
  float: right;
  width: 95px;
  height: 29px;
  color: #6ce4e1;
}
.index-pubu-search-back a,
.index-pubu-search-back a:visited {
  color: #6ce4e1;
}
.index-pubu-search-back a:hover {
  text-decoration: none;
  color: #00d1d4;
}
.index-pubu-search-back:hover {
  background: url(assets/images/icon-back-on.png) left 11px no-repeat;
  text-decoration: none;
  color: #00d1d4;
}
.index-pubu-search-nodata {
  padding: 15px 0 0;
  display: none;
  width: 100%;
}
.index-pubu-search-nodata img {
  display: block;
  margin: 0 auto;
}
.item-support-ok {
  background: #ffffff url(assets/images/support-on.png) left 2px no-repeat;
}
.item-list-box {
  width: 110%;
  height: auto;
  padding-bottom: 20px;
  float: left;
}
.item-num-left {
  position: absolute;
  padding: 0 12px;
  display: inline-block;
  left: 0;
  top: 0;
  height: 22px;
  font-size: 12px;
  border-bottom-right-radius: 3px;
  line-height: 22px;
  background: rgba(0, 0, 0, 0.3);
  color: #fff;
  text-align: center;
}
/*原画*/
.item-list {
  width: 1254px;
  float: left;
  position: relative;
  /*display: flex;
    justify-content: center;
    align-items: center;
    flex-wrap: wrap;*/
}
.item-list .item {
  width: 288px;
  background: #fff;
  border-radius: 3px;
  overflow: hidden;
  margin: 0 0 20px;
  -webkit-box-shadow: 1px 1px 8px #dfdfdf;
          box-shadow: 1px 1px 8px #dfdfdf;
  padding-bottom: 15px;
}
.item-list .item .workname {
  padding: 2px 0 0;
  margin: 0 auto 10px;
  width: 255px;
  border-bottom: #f0f0f0 solid 1px;
  overflow: hidden;
  height: 38px;
  line-height: 38px;
}
.item-list .item .work-img-link {
  display: block;
}
.item-list .item .work-img-link img {
  width: 100%;
  height: auto;
}
.item-list .item .work-img-link .loadimg {
  width: 48px;
  height: 48px;
  display: block;
  margin: 20px 0 20px 83px;
}
.item-list .item .work-txt-link {
  height: 14px;
  line-height: 14px;
  color: #575757;
  font-size: 14px;
  font-weight: bold;
  margin: 5px 0;
}
.item-list .item .crit-box {
  padding-left: 17px;
  padding-bottom: 15px;
  border-bottom: 1px solid #f2f2f2;
}
.item-list .item .crit-box span,
.item-list .item .crit-box a {
  height: 18px;
  line-height: 18px;
  display: inline-block;
  color: #90908f;
  font-size: 12px;
}
.item-list .item .crit-box .votecount {
  padding-left: 25px;
  background-position: 0 0;
  margin-right: 20px;
}
.pagination {
  text-align: center;
  padding-top: 25px;
  padding-bottom: 30px;
}
.pagination span,
.pagination a {
  font-family: Arial;
  font-size: 11px;
  color: #575757;
  line-height: 32px;
  display: inline-block;
  width: 26px;
  height: 32px;
  margin: 0 5px 0;
  background: #e0e0e0;
  border-radius: 3px;
  text-align: center;
}
.pagination span.current {
  font-weight: bold;
  color: #fff;
  background: #67e4e0;
}
.pagination a.prev,
.pagination a.next {
  width: 50px;
}
.pagination .prev.current,
.pagination .next.current {
  display: none;
}
.pagination {
  clear: both;
}
.video-item-root {
  position: relative;
  overflow: hidden;
  margin-right: 25px;
  margin-bottom: 25px;
  width: 390px;
  height: 437px;
  float: left;
}
.video-item-root:hover {
  -webkit-box-shadow: grey 0px 0px 10px;
          box-shadow: grey 0px 0px 10px;
}
.video-item-root .video-item-group-1 {
  position: absolute;
  width: 393px;
  height: 437px;
  top: 0;
  left: -1px;
  border-radius: 4px;
  overflow: hidden;
}
.video-cover {
  position: absolute;
  width: 391px;
  height: 218px;
  top: 0;
  left: 0;
}
.video-cover .hover-cover {
  position: absolute;
  width: 391px;
  height: 218px;
  top: 0;
  left: 0;
}
.video-item-root .video-cover:hover .hover-cover {
  background-color: rgba(0, 0, 0, 0.3);
  cursor: pointer;
  z-index: 10;
}
.video-item-root .video-cover:hover .video-item-layer-2 {
  display: block;
  cursor: pointer;
}
.video-item-root .video-item-layer-1 {
  position: absolute;
  width: 391px;
  height: 327px;
  top: 0;
  left: 0;
  cursor: pointer;
  /*background-image: url(assets/images/video-item/video-item-layer-1.png);
    background-size: cover;*/
}
/*.video-item-root .video-item-layer-1:hover {
    opacity: 0.5;
  }*/
.video-item-root .video-item-layer-2 {
  position: absolute;
  width: 82px;
  height: 65px;
  top: 77px;
  left: 155px;
  background-image: url(assets/images/video-item/video-item-layer-2.png);
  background-size: cover;
  display: none;
  z-index: 20;
}
.video-item-root .video-item-group-2 {
  position: absolute;
  width: 390px;
  height: 110px;
  bottom: 0px;
  left: 1px;
}
.video-item-root .video-item-layer-3 {
  position: absolute;
  width: 390px;
  height: 110px;
  top: 0;
  left: 0;
  background: white;
  /*background-image: url(assets/images/video-item/video-item-layer-3.png);
    background-size: cover;*/
}
.video-item-root .video-item-group-3 {
  position: absolute;
  width: 183px;
  height: 20px;
  top: 70px;
  left: 189px;
}
.video-item-root .video-item-layer-4 {
  height: 20px;
  font-size: 14px;
  line-height: 20px;
  /* top: 0px; */
  /* right: 0px; */
  color: #808080;
  float: right;
  margin-left: 3px;
}
.video-item-root .video-item-layer-5 {
  width: 18px;
  height: 18px;
  /* top: 0; */
  /* left: 0; */
  background-image: url(assets/images/video-item/video-item-layer-5.png);
  background-size: cover;
  cursor: pointer;
  float: right;
}
.video-item-root .video-item-layer-6 {
  position: absolute;
  width: 356px;
  height: 1px;
  top: 39px;
  left: 17px;
  background-image: url(assets/images/video-item/video-item-layer-6.png);
  background-size: cover;
  opacity: 0.2;
}
.video-item-root .video-item-layer-7 {
  position: absolute;
  width: 26px;
  height: 26px;
  top: 47px;
  left: 18px;
  border-radius: 50%;
  /* background-image: url(assets/images/video-item/video-item-layer-7.png);
     background-size: cover;*/
}
.video-item-root .video-item-layer-8 {
  position: absolute;
  width: 291px;
  height: 15px;
  top: 14px;
  left: 17px;
  /* background-image: url(assets/images/video-item/video-item-layer-8.png);
     background-size: cover;*/
  opacity: 0.9019607843137255;
  -o-text-overflow: ellipsis;
     text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
  line-height: 15px;
  font-size: 15px;
  font-weight: bold;
}
.video-item-root .video-item-layer-9 {
  position: absolute;
  width: 124px;
  height: 15px;
  font-size: 15px;
  line-height: 15px;
  color: #988a7a;
  top: 53px;
  left: 51px;
  white-space: nowrap;
  -o-text-overflow: ellipsis;
     text-overflow: ellipsis;
  overflow: hidden;
  /*background-image: url(assets/images/video-item/video-item-layer-9.png);
    background-size: cover;*/
  opacity: 0.7019607843137254;
}
.video-item-root .video-item-layer-10 {
  position: absolute;
  width: 225px;
  height: 12px;
  line-height: 12px;
  font-size: 12px;
  top: 77px;
  color: #bcbcbc;
  left: 18px;
  /* background-image: url(assets/images/video-item/video-item-layer-10.png); */
  /* background-size: cover; */
  /* opacity: 0.4; */
}

#__PUBLIC_FOOTER__ {
    height: 230px;
    background-color: #222;
  }</style>
  <!--[if lt IE 9]>
    <script src="//zhcdn01.xoyo.com/xassets/lib/shim/xfe/xfe-shim.min.js"></script>
<![endif]-->
<script>
  if (!window.Promise) {
    document.writeln('<script src="//zhcdn01.xoyo.com/xassets/lib/es6-promise/stable/es6-promise.auto.min.js"' + '>' + '<' + '/' + 'script>');
  }
</script>

  <script class>
  function getUrlParameter(parameterName) {
    var result = null,
      tmp = [];
    location.search
      .substr(1)
      .split("&")
      .forEach(function (item) {
        tmp = item.split("=");
        if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
      });
    return result;
  }
</script>

  <link rel="stylesheet" href="//zhcdn01.xoyo.com/xassets/lib/animatecss/animate.min.css">
  <script type="text/javascript">
    function IsPC() {
      var userAgentInfo = navigator.userAgent;
      var Agents = new Array("Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod", "XiaoMi");
      var flag = true;
      for (var v = 0; v < Agents.length; v++) {
        if (userAgentInfo.indexOf(Agents[v]) > 0) {
          flag = false;
          break;
        }
      }
      return flag;
    }
    if (!IsPC()) {
      function getPageRouteByUrl() {
        const regText = /\/\w*.html/
        return window.location.href.match(regText)[0];
      }
      //如果不是pc端，则重定向至移动端
      const pageRoute = getPageRouteByUrl();
      switch(pageRoute){
        case '/list.html':{
          window.location.href="https://test-zt.xoyo.com/jx3.xoyo.com/m/2019/05/27/tongren-novel/#/";
          break;
        }
        case '/detail.html':{
          const id = getUrlParameter('id');
          window.location.href = `https://test-zt.xoyo.com/jx3.xoyo.com/m/2019/05/27/tongren-novel/#/details/${id}`;
          break;
        }
        case '/index.html':{
          window.location.href="https://test-zt.xoyo.com/jx3.xoyo.com/m/2019/05/27/tongren-novel/index.html"; //地址
          break;
        }
        case '/rule.html':{
          window.location.href="https://test-zt.xoyo.com/jx3.xoyo.com/m/2019/05/27/tongren-novel/#/rule"; //地址
          break;
        }
        case '/award.html':{
          window.location.href="https://test-zt.xoyo.com/jx3.xoyo.com/m/2019/05/27/tongren-novel/#/prize"; //地址
          break;
        }
      }
    }
  </script>

</head>
<body>










<!--[if lt IE 7]>
<div id="__IE_WARNING__" style="padding: 80px 0; width: 100%; text-align: center; line-height: 150%; font-size: 16px; background: #fff;">
    <h3>抱歉</h3>
    <p>由于官网使用HTML5技术，您的浏览器版本过低不能正常访问<br>建议您升级您的浏览器！既能享受新技术的革新，又能保障您的上网安全</p>
    <a href="http://browsehappy.osfipin.com/" style="color:red;">立即升级浏览器</a>
</div>
<![endif]-->

    
    


<div class="menu-rig-pop J_globalClickTrack" data-tongji-name="click_top" data-tongji-desc="点击右侧通栏">
  <div class="menu-rig-pop-menu J_menu-rig-popsidebarPopMenu">
    <ul>
      <li class="menu-rig-pop-menu01">
        <a href="//jx3.xoyo.com/zt/2019/04/30/tongren/" target="_blank"></a>
      </li>
      <li class="menu-rig-pop-menu02">
        <a href="https://jx3.xoyo.com/zt/2019/04/26/tongren-match/index.html" target="_blank"></a>
      </li>
      <li class="menu-rig-pop-menu03">
        <a href="https://bcy.net/static/jw3cos2019intro" target="_blank"></a>
      </li>
      <li class="menu-rig-pop-menu04">
        <a target="_blank" href="https://jx3.xoyo.com/zt/2019/05/06/tongren-dance/index.html"></a>
      </li>
      <li class="menu-rig-pop-menu05"><a target="_blank" href="https://www.gracg.com/huodong/home/index/jx10years"></a></li>
      <li class="menu-rig-pop-menu06"><a target="_blank" href="http://5sing.kugou.com/subject/19jw/index?type=j3"></a></li>
      <li class="menu-rig-pop-menu07"><a target="_blank" href="https://jx3.xoyo.com/zt/2019/05/27/tongren-fashion/index.html"></a></li>
      <li class="menu-rig-pop-menu08">
        <a class="menu-rig-pop-cur" href="javascript:0;"></a>
        <dl class="menu-rig-pop-menu-pop J_menu-rig-popmenuPop01">
          <dd><a href="index.html">活动首页</a></dd>
          <dd><a href="list.html">作品展示</a></dd>
          <dd><a href="award.html">获奖公布</a>
          </dd>
        </dl>
      </li>
      <li class="menu-rig-pop-menu09"><a target="_blank" href="https://www.bilibili.com/blackboard/activity-R0Kl75u_0.html"></a></li>
      <li class="menu-rig-pop-menu10"><a target="_blank" href="https://jx3.xoyo.com/zt/2019/06/06/tongren-screen/index.html"></a></li>
      <li class="menu-rig-pop-menu11"><a target="_blank" href="https://kg.qq.com/html/contest/detail.html?id=4607"></a></li>
      <li class="menu-rig-pop-menu12">
        <div class="menu-rig-pop-wx-code">
          <img src="assets/images/wx-code.png" alt="官方信息">
        </div>
        <a href="javascript:;"></a>
      </li>
    </ul>
  </div>
</div>


    
<!--
  调用这个组件的地方有：
  assets/scripts/main.js  里面的通用弹出提示方法  如果这里要改ns ，那么这里也要改

-->


<div class="popupGlo-mask J_popupGlomask"></div>
<div class="popupGlo-tips-wrap J_popupGlotipsBox">
  <p class="popupGlo-tips-text J_popupGlotipsText"></p>
  <div class="popupGlo-btn-wrap">
    <div class="popupGlo-btn J_popupGlocloseBtn">知道啦</div>
  </div>
</div>
<div class="popupGlo-rule J_popupGlotipsRuleBox">
  <div class="popupGlo-rule-wrap">
    <div class="popupGlo-rule-close J_popupGlocloseBtn"></div>
    <div class="popupGlo-rule-top">
      <h2 class="popupGlo-rule-top-tit">参赛规则</h2>
    </div>
    <div class="popupGlo-rule-box">
      <h3 class="popupGlo-rule-tit">【参赛规则】</h3>
      <p class="popupGlo-rule-txt">1.本次大赛提交参赛作品时间为：4月30日12:00-7月15日23:59</p>
      <p class="popupGlo-rule-txt">2.参赛作品提交流程：</p>
      <p class="popupGlo-rule-txt"><span>——登陆金山通行证</span></p>
      <p class="popupGlo-rule-txt"><span>——进入参赛页面</span></p>
      <p class="popupGlo-rule-txt"><span>——点击“立即参赛”，阅读并同意《参赛须知》，上传作品，填写作品信息，发布参赛作品</span></p>
      <p class="popupGlo-rule-txt"><span>——将作品分享至新浪微博，加标签TAG #剑网3十周年# 和 #剑网3周边大赛# 并@剑网3有爱同人秀</span></p>
      <p class="popupGlo-rule-txt"><span>——成功参赛</span></p>
      <span class="blank h20"></span>
      <span class="popupGlo-rule-line"></span>
      <span class="blank h20"></span>
      <h3 class="popupGlo-rule-tit">【获奖作品评分标准】</h3>
      <p class="popupGlo-rule-txt">1. 官方将从四个维度为参赛作品评分：<strong>A人气值分（10%）；B量产可实行性（30%）；C创意（30%）；D作品完成度（30%）</strong>；</p>
      <p class="popupGlo-rule-txt">2. 毛绒玩具、手办模玩的设定越详细越清晰，量产可行性越高，得分越高。</p>
      <span class="blank h20"></span>
      <span class="popupGlo-rule-line"></span>
      <span class="blank h20"></span>
      <h3 class="popupGlo-rule-tit">【投稿须知】</h3>
      <p class="popupGlo-rule-txt">1.  参赛作品创作题材为剑网3 IP系列，包含但不仅限于：端游《剑网3重制版》、手游《剑网3：指尖江湖》、动画《剑网3·侠肝义胆沈剑心》、舞台剧《曲云传》等题材，风格不限。无关题材、非周边设计内容将视为无效投稿。</p>
      <p class="popupGlo-rule-txt">2.  参赛作品上传内容包含：作品名称、设计理念、作品设计稿等，多视角设计图及生产文件有额外加分哦！</p>
      <p class="popupGlo-rule-txt">3.  参赛作品必须为本人原创，不得侵犯第三方知识产权，不得剽窃、抄袭他人作品。若版权归属多人，参赛者必须保证作品已获得其他版权所有者的授权。如有违反，立即取消参赛资格，由此产生的法律纠纷由参赛者全权负责。</p>
      <p class="popupGlo-rule-txt">4.  参赛作品及相关文字描述须健康向上，不得违反国家法律法规，不得宣扬色情、暴力、血腥等不良内容，不得包含商业推广信息。</p>
      <p class="popupGlo-rule-txt">5.  参赛作品版权归作者与剑网3共同所有，未经授权参赛者不得将参赛作品自行用于商业用途，或授予任何第三方使用。不得用参赛作品参与其他同类赛事/活动，否则取消获奖资格。一经投稿视为允许主办方进行实体化生产，并有机会获得官方在活动相关专题、官网、新闻、微博、微信、剑网3推拦等推广中署名宣传。</p>
      <p class="popupGlo-rule-txt">6.  本次活动禁止刷票，情节严重者取消参赛资格。</p>
      <p class="popupGlo-rule-txt">7.  比赛结果公布后，请按照网站指引，及时提交相关获奖信息（姓名、地址、联系方式、区服账号等）以便奖励发放。相关信息收集截止至8月31日，逾期未提交者视为放弃。所有奖励将于9月起陆续发放，参赛者因个人原因未能成功领取奖品则视为放弃奖品。</p>
      <p class="popupGlo-rule-txt">8.  如获奖作品被主办方制作成为实物商品，作者配合官方进行相应修改、细化设计文件，可获得额外酬劳，优秀作者还有机会获得西山居官方offer。</p>
      <p class="popupGlo-rule-txt">9.  若发现作品有任何违规行为，请在作品页点击【举报】填写并上传相关凭证。</p>
      <p class="popupGlo-rule-txt">10.欢迎周边爱好者加入官方周边交流群：QQ群651940485。</p>
      <p class="popupGlo-rule-txt">11.本次大赛最终解释权归剑网3所有。</p>
      <span class="blank h20"></span>
      <span class="popupGlo-rule-line"></span>
      <span class="blank h20"></span>
      <h3 class="popupGlo-rule-tit">【特别声明】</h3>
      <p class="popupGlo-rule-txt">以下情况查实后将取消参赛资格：</p>
      <p class="popupGlo-rule-txt">1.参赛者侵犯第三方著作权等合法权益；</p>
      <p class="popupGlo-rule-txt">2.参赛者存在恶意刷票行为，且情节严重；</p>
      <p class="popupGlo-rule-txt">3.参赛者在活动期内将参赛作品以任何形式自行用于商业用途或授权任何第三份阿哥使用。</p>
      <span class="blank h20"></span>
      <span class="popupGlo-rule-line"></span>
      <span class="blank h20"></span>
      <h3 class="popupGlo-rule-tit">【投稿样例】</h3>
      <p class="popupGlo-rule-txt">自由投稿，样例仅作参考。<a href="//jx3.xoyo.com/zt/2019/04/20/muban/tougao-yangshi-muban.zip" target="_blank">《剑网3》周边大赛投稿模板下载 &gt;&gt;&gt;</a></p>
      <img src="assets/images/rule/pop.jpg" alt>
      <span class="blank h20"></span>
      <a class="popupGlo-rule-btn" href="join.html">
        <span class="global-click-btn J_globalClickTrack" data-tongji-name="click_accept_protocol" data-tongji-desc="我同意参赛规则">我同意参赛规则</span>
      </a>
      <span class="blank h20"></span>
    </div>
  </div>
</div>


    


    <script class>
  function getUrlParameter(parameterName) {
    var result = null,
      tmp = [];
    location.search
      .substr(1)
      .split("&")
      .forEach(function (item) {
        tmp = item.split("=");
        if (tmp[0] === parameterName) result = decodeURIComponent(tmp[1]);
      });
    return result;
  }
</script>

    <div class="layout-wrapper">
      <div class="layout-wrapper-container">
    
    
    



<div class="head-menu">
  <div class="page clearfix">
    <div class="head-menu-menu J_head-menumenu J_globalClickTrack" data-tongji-name="click_lable" data-tongji-desc="点击首页顶部通栏">
      <ul>
        <li class="J_globalClickTrack" data-tongji-name="click_home" data-tongji-desc="点击首页"><span></span><a href="index.html">活动首页</a></li>
        <li class="J_globalClickTrack" data-tongji-name="click_works" data-tongji-desc="点击作品"><span></span><a href="list.html">作品展示</a></li>
        <li class="J_globalClickTrack" data-tongji-name="click_rewards" data-tongji-desc="点击获奖"><span></span><a href="award.html">获奖公布</a>
        </li>
        <li><span></span><a href="//jx3.xoyo.com/zt/2019/04/30/tongren/">更多活动</a></li>
      </ul>
    </div>
    <div class="head-menu-right">
      <div class="head-menu-search">
        <input class="head-menu-search-input J_searchInfoText" data-type="searchTop" type="text" placeholder="搜索...">
        <span class="head-menu-search-btn J_searchInfoBtn J_globalClickTrack" data-tongji-name="click_search" data-tongji-desc="点击搜索" data-type="searchTop"></span>
      </div>
      <div class="head-menu-avatar J_head-menuloginSuccess">
        <span onclick="javascript:XPASS.signin();">【切换】</span>
      </div>
      <a target="_blank" class="head-menu-join-btn J_globalClickTrack" data-tongji-name="click_join" data-tongji-desc="点击首页顶部我要参赛" href="https://tg.daily.xoyo.com/">我要参赛
      </a>
    </div>
  </div>
</div>




    


<div class="banner">
  <div class="page clearfix">
    <div class="banner-box">
      


<div class="menu-banner-top-menu">
  <ul>
    <li class="menu-banner-top-menu01 J_globalClickTrack" data-tongji-name="click_czb" data-tongji-desc="点击重制版"><a href="//jx3.xoyo.com/index/" target="_blank">剑网3重制版</a></li>
    <li class="menu-banner-top-menu02 J_globalClickTrack" data-tongji-name="click_tl" data-tongji-desc="点击指尖江湖"><a href="//jx3.qq.com" target="_blank">剑网3指尖江湖</a></li>
    <li class="menu-banner-top-menu03 J_globalClickTrack" data-tongji-name="click_jnh" data-tongji-desc="点击嘉年华"><a href="//jx3.xoyo.com/zt/2019/04/30/tongren/" target="_blank">剑网3嘉年华</a></li>
  </ul>
</div>

    </div>
  </div>
</div>

    <span class="blank h20"></span>
    <div class="index-page-content page">
      
<!--suppress CssUnknownTarget -->

<!--用来调用menu-index的组件的选项卡事件-->



<div class="index-pubu-rank-box inList">
  <div class="index-pubu-rank J_index-puburankBox">
    <ul>
      <li class="index-pubu-rank-cur" data-work-type="0" data-order-by="1" data-change="0">
        <span class="global-click-btn J_globalClickTrack" data-tongji-name="click_change1" data-tongji-desc="点击切换">最新</span>
        <div class="device-line"></div>
        <div class="arror"></div>
      </li>
      <li data-work-type="0" data-order-by="2" data-change="0">
        <span class="global-click-btn J_globalClickTrack" data-tongji-name="click_change1" data-tongji-desc="点击切换">人气</span>
        <div class="device-line"></div>
        <div class="arror"></div>
      </li>
      <!--<li data-work-type="0" data-order-by="1" data-change="1">
        <span class="global-click-btn J_globalClickTrack" data-tongji-name="click_change"
              data-tongji-desc="换一批">换一批</span>
      </li>-->
    </ul>
  </div>
</div>
<div class="index-pubu-search-nav J_index-pubusearchNav" id="searchtop" style="display: none">
  <div class="index-pubu-search-back"><a href="list.html"><span class="global-click-btn J_globalClickTrack" data-tongji-name="click_back_index" data-tongji-desc="返回全部">返回全部</span></a>
  </div>
  ”<span class="J_index-pubusearchTxt"></span>“搜索结果，共<span class="J_index-pubusearchNum">0</span>条
</div>
<!--<div class="index-pubu-rank-box J_index-puburankSearch" style="display: none">
  <div class="index-pubu-rank J_index-puburankBoxSearch" style="width: 215px">
    <ul>
      <li class="index-pubu-rank-cur" data-order-by="1"><span class="global-click-btn J_globalClickTrack"
                                                          data-tongji-name="click_new" data-tongji-desc="最新">最新</span>
      </li>
      <li data-order-by="2" style="width: 70px"><span class="global-click-btn J_globalClickTrack"
                                                      data-tongji-name="click_popular" data-tongji-desc="人气">人气</span>
      </li>
    </ul>
  </div>
</div>-->
<div class="index-pubu J_globalClickTrack" data-tongji-name="click_works" data-tongji-desc="点击查看作品">
  <div class="item-list-box">
    <div class="item-list infinite_scroll clearfix">
      <p align="center">内容载入中......</p>
      <div class="index-pubu-search-nodata J_index-pubusearchNoData">
        <img src="assets/images/no-result.png" alt="暂无数据">
      </div>
    </div>
    <!--分页-->
    <!--<div class="page-nav"></div>-->
    <!--分页-->
  </div>
</div>
<div class="page-nav">
  <div class="pagination"></div>
</div>








    </div>
    
      </div>
    </div>
    
    
    
    
    
    
    

    







  <!--外部资源从这里开始-->
<script class="external" src="//zhcdn01.xoyo.com/xassets/lib/jquery/1.7.2/jquery.min.js"></script>
<script class="external" src="//zhcdn01.xoyo.com/xassets/lib/dialog/artDialog/4.1.7/artDialog.js"></script>
<script class="external" src="//zhcdn01.xoyo.com/xassets/com/pf/register/jsreg/v2/register.js"></script>
<script class="external" src="//zhcdn01.xoyo.com/xassets/com/pf/xpass/v1/xpass.test.js"></script>
<script class="external" src="//zhcdn01.xoyo.com/xassets/com/jx3/navibar/v2/navibar.js"></script>
<script class="external" src="//zhcdn01.xoyo.com/xassets/lib/st-report-sdk/stable/st-report-sdk.min.js"></script>
<script class="external" src="//zhcdn01.xoyo.com/xassets/lib/jquery.cookie/1.4.1/jquery.cookie.js"></script>
<script class="external" src="//zhcdn01.xoyo.com/assets/lib/jquery.inview/jquery.inview.min.js"></script>
<script class="external" src="//zhcdn01.xoyo.com/xassets/lib/masonry/2.1.08/jquery.masonry.min.js"></script>
<script class="external" src="//jx3.xoyo.com/assets/page/tr/javascripts/jquery.pagination.js"></script>
<script class="external" src="//zhcdn01.xoyo.com/xassets/com/pf/method/comMethod.js"></script>
<script class="external" src="assets/scripts/service.js"></script>
<script class="external" src="//zhcdn01.xoyo.com/xassets/lib/xfe-request/v0/stable.min.js"></script>
<script class="external" src="//zhcdn01.xoyo.com/xassets/com/pf/baiduShare/static/api/js/share.js"></script>
<script class="external" src="//zhcdn01.xoyo.com/xassets/lib/dropload/0.9.1/dropload.min.js"></script>
<script class="external" src="//zhcdn01.xoyo.com/xassets/lib/jquery.qrcode/jquery.qrcode.min.js"></script>
<script class="external" src="assets/scripts/service/index.js"></script>
<script class="external" src="//zhcdn01.xoyo.com/xassets/com/pf/footer/v3/black/footer.js"></script>

<!-- build:vendors assets/scripts/vendors.js -->
  <!--第三方脚本从这里开始-->
<!-- endbuild -->

<!-- build:js assets/scripts/bundles.build.js -->
<script src="assets/scripts/main.js"></script>
<script src="assets/scripts/error-handler.js"></script>
<!-- endbuild -->
<script>(function ($) {
  var o = $({});
  $.subscribe = function () {
    o.on.apply(o, arguments);
  };
  $.subscribeOnce = function (name, rawFunc) {
    var func = function func() {
      $.unsubscribe.apply(null, arguments);
      rawFunc.apply(this, arguments);
    };
    $.subscribe.apply(null, [name, func]);
  };
  $.unsubscribe = function () {
    o.off.apply(o, arguments);
  };
  $.publish = function () {
    console.log(arguments[0]);
    o.trigger.apply(o, arguments);
  };
})(jQuery);
(function () {
  $('.J_menu-rig-popsidebarPopMenu li').mouseenter(function () {
    $(this).find('.menu-rig-pop-menu-pop').show();
  });
  $('.J_menu-rig-popsidebarPopMenu li').mouseleave(function () {
    $(this).find('.menu-rig-pop-menu-pop').hide();
  });

  var webLink = window.location.href;
  webLink = webLink.split('.').join('');
  if (webLink.lastIndexOf('listhtml') > -1) {
    $('.J_menu-rig-popmenuPop01 a').eq(1).addClass('menu-rig-pop-cur-s');
  }
  if (webLink.lastIndexOf('indexhtml') > -1) {
    $('.J_menu-rig-popmenuPop01 a').eq(0).addClass('menu-rig-pop-cur-s');
  }
})();
$(window).on('scroll', function () {
  if (window.scrollY >= 400) {
    $('.menu-rig-pop').fadeIn(500);
  } else {
    $('.menu-rig-pop').fadeOut(500);
  }
});
(function () {
  $('.J_popupGlocloseBtn, .J_popupGlomask').on('click', function () {
    $('.J_popupGlomask, .J_popupGlotipsBox, .J_popupGlotipsRuleBox').fadeOut();
  });
})();
(function () {
  //获取页面加载的相关时间戳
  document.ready = function () {
    window.pageLoadBegin = +new Date();
  };
})();
/**
 *
 * @param eventName  事件名称，对应统计文档ev_n
 * @param eventDescription 事件描述，对应统计文档ev_desc
 * @param ret_code 错误提示码,常用于后端接口返回的错误状态码，如 -20001
 * @param ret_msg 错误提示文案，常用于后端接口返回错误描述，如： XX失败
 */

/**
 * 调用方法，比如： window.stReportGlobal('load_page','页面加载');
 */
window.stReportGlobal = function (eventName, eventDescription, searchInfo, ret_code, ret_msg) {
  var projectHost = window.location.host ? window.location.host : 'jx3.xoyo.com';
  var web_l = window.location.host || '';
  var web_l_join = web_l.split('.').join('');

  // * @param projectIdentifier [string] - 项目标识（[A-Za-z_]+{4, },内部约定），必选
  // * @param eventName [string] - 事件名称，（格式与时间分组一致），可选
  // * @param eventGroup [string] - 事件分组（[A-Za-z_\-]+{1,},内部约定），可选 ，对应统计文档： ev_g
  // * @param eventDescription [string]- 事件描述（字符串）
  // * @param eventDataValue [object] - 事件额外数据对象，kv对，可选, 如: evd[k1]=v1&evd[k2]
  // * @param eventTags [string[]] - 事件标签数组（格式与时间分组一致），可选 ，对应统计文档：ev_tag
  try {
    StReportSdk.getDefaultInstance('2019_05_06_jx3_xoyo_com_tongren-novel').report({
      eventName: eventName,
      projectIdentifier: web_l_join.lastIndexOf('xoyo') > -1 ? projectHost.split('.')[0] : 'jx3-test',
      eventDescription: eventDescription,
      eventTags: ['pc', 'tongren', 'zshd'],
      eventGroup: 'jx3_trxs_20190516',
      eventDataValue: {
        word: searchInfo,
        ret_code: ret_code,
        ret_msg: ret_msg
      }
    });
  } catch (e) {
    setTimeout(function () {
      throw e;
    });
  }
};
window.stReportWithName = function (eventName, eventDescription, workName) {
  var projectHost = window.location.host ? window.location.host : 'jx3.xoyo.com';
  var web_l = window.location.host || '';
  var web_l_join = web_l.split('.').join('');

  // * @param projectIdentifier [string] - 项目标识（[A-Za-z_]+{4, },内部约定），必选
  // * @param eventName [string] - 事件名称，（格式与时间分组一致），可选
  // * @param eventGroup [string] - 事件分组（[A-Za-z_\-]+{1,},内部约定），可选 ，对应统计文档： ev_g
  // * @param eventDescription [string]- 事件描述（字符串）
  // * @param eventDataValue [object] - 事件额外数据对象，kv对，可选, 如: evd[k1]=v1&evd[k2]
  // * @param eventTags [string[]] - 事件标签数组（格式与时间分组一致），可选 ，对应统计文档：ev_tag
  try {
    StReportSdk.getDefaultInstance('2019_05_06_jx3_xoyo_com_tongren-novel').report({
      eventName: eventName,
      projectIdentifier: web_l_join.lastIndexOf('xoyo') > -1 ? projectHost.split('.')[0] : 'jx3-test',
      eventDescription: eventDescription,
      eventTags: ['pc', 'tongren', 'zshd'],
      eventGroup: 'jx3_trxs_20190516',
      eventDataValue: {
        el_val: workName
      }
    });
  } catch (e) {
    setTimeout(function () {
      throw e;
    });
  }
};
window.stReportWithTimeStamp = function (eventName, eventDescription, timeStamp) {
  var projectHost = window.location.host ? window.location.host : 'jx3.xoyo.com';
  var web_l = window.location.host || '';
  var web_l_join = web_l.split('.').join('');
  // * @param projectIdentifier [string] - 项目标识（[A-Za-z_]+{4, },内部约定），必选
  // * @param eventName [string] - 事件名称，（格式与时间分组一致），可选
  // * @param eventGroup [string] - 事件分组（[A-Za-z_\-]+{1,},内部约定），可选 ，对应统计文档： ev_g
  // * @param eventDescription [string]- 事件描述（字符串）
  // * @param eventDataValue [object] - 事件额外数据对象，kv对，可选, 如: evd[k1]=v1&evd[k2]
  // * @param eventTags [string[]] - 事件标签数组（格式与时间分组一致），可选 ，对应统计文档：ev_tag
  try {
    StReportSdk.getDefaultInstance('2019_05_06_jx3_xoyo_com_tongren-novel').report({
      eventName: eventName,
      projectIdentifier: web_l_join.lastIndexOf('xoyo') > -1 ? projectHost.split('.')[0] : 'jx3-test',
      eventDescription: eventDescription,
      eventTags: ['pc', 'tongren', 'zshd'],
      eventGroup: 'jx3_trxs_20190516',
      eventDataValue: {
        td_pl: timeStamp
      }
    });
  } catch (e) {
    setTimeout(function () {
      throw e;
    });
  }
};
(function () {
  var webLink = window.location.href;
  webLink = webLink.split('.').join('');
  if (webLink.lastIndexOf('indexhtml') > -1) {
    $('.J_head-menumenu li').eq(0).addClass('head-menu-menu-on');
  } else if (webLink.lastIndexOf('listhtml') > -1) {
    $('.J_head-menumenu li').eq(1).addClass('head-menu-menu-on');
  } else if (webLink.lastIndexOf('awardhtml') > -1) {
    $('.J_head-menumenu li').eq(2).addClass('head-menu-menu-on');
  }
  XPASS.isLogin(function () {
    $('.J_head-menuloginSuccess').show();
  }, function () {

    if (webLink.lastIndexOf('join') > -1 || webLink.lastIndexOf('my-work') > -1 || webLink.lastIndexOf('tougao') > -1 || webLink.lastIndexOf('report') > -1) {
      //如果是我要参加页面 则弹出登录窗口
      XPASS.signin();
    }
  });

  if (webLink.lastIndexOf('listhtml') > -1 || webLink.lastIndexOf('searchhtml') > -1) {
    //如果是规则页和举报页，需要单独加搜索按钮功能
  } else {
    var seachEvent = function seachEvent(event) {
      var $this = $(event.target);
      var searchType = $this.attr('data-type');
      var keyword = $this.val() ? $this.val() : $this.siblings('.J_searchInfoText').val();
      window.stReportGlobal('click_search', '点击搜索', keyword);
      if (!keyword) {
        window.errorTips('请输入搜索内容');
        return;
      }
      window.scrollTo(0, 717);

      /**
       * 如果是搜索页 那么就不刷新 否则跳转到搜索结果页
       */
      window.location.href = 'search.html?keywords=' + keyword + '#searchtop';
    };
    $('.J_searchInfoBtn').on('click', seachEvent);
    $('.J_searchInfoText').on('keydown', function (event) {
      if (event.keyCode == 13) {
        seachEvent(event);
      }
    });
  }

  $('.J_head-menujoinBtn').on('click', function () {
    window.stReportGlobal('click_publish_work_top', '投稿');
    if ($.cookie('isClickAgreeRule') === 'agreement') {
      window.location.href = 'join.html';
    } else {
      $('.J_popupGlotipsRuleBox, .J_popupGlomask').fadeIn();
      $.cookie('isClickAgreeRule', 'agreement', { expires: 800 });
    }
  });
})();

(function () {
  $('.detail .detail-content .works-manage').on('click', function (e) {
    e.preventDefault();
    window.stReportGlobal('click_publish_my_work', '作品管理');
    window.location.href = 'my-work.html';
  });
  $('.detail .detail-content .notice').on('click', function (e) {
    e.preventDefault();
    window.stReportGlobal('click_publish_notice', '系统通知');
    window.location.href = 'tougao.html';
  });
  $('.detail .detail-content .get-peize').on('click', function (e) {
    e.preventDefault();
    window.stReportGlobal('click_award_top', '领取奖励');
    //window.errorTips('比赛正在进行中，获奖结果将于<br />8月1日公布，请大侠耐心<br />等候哦！(　ﾟ∀ﾟ) ﾉ♡');
  });
  $('.head-menu-search-input').on('blur', function (e) {
    console.log('blur');
    $('.head-menu-search').attr('focus', 'false');
  });
  $('.head-menu-search-input').on('click', function (e) {
    console.log('focus');
    $('.head-menu-search').attr('focus', 'true');
  });
})();
(function () {
  return new Promise(function ($return, $error) {
    var searchList, service, linkUrl, pageSize, arrSortByLike, getLikeList, likeList, getWorksList, initPubu, getSearchWorks, initSearch, searchInfo;


    //渲染瀑布流
    function initPubuDom($data) {
      var $args = arguments;return new Promise(function ($return, $error) {
        var type = $args.length > 1 && $args[1] !== undefined ? $args[1] : 'list';

        if ($data.length > 0) {
          var html = '',
              dataLoop = '';
          if (type === 'search') {
            $('.J_index-puburankSearch').show();
            dataLoop = $data;
            $('.J_index-pubusearchNum').empty().html(searchList.length);
          } else {
            dataLoop = $data;
          }
          $.each(dataLoop, function (i, object) {
            html += '<div class="video-item-root">\n            <div class="video-item-group-1" data-name="1">\n            <div class="video-cover" data-work-id="' + object.id + '">\n              <a href=\'detail.html?id=' + object.id + '\' target="_blank">\n                <img class="video-item-layer-1 ClickTrackWithWorkName"\n                     data-tongji-desc="\u70B9\u51FB\u4F5C\u54C1"\n                     data-tongji-name="click_works2"\n                     data-work-name="' + object.title + '"\n                     data-work-id="' + object.id + '"\n                     src="' + object.thumb + '"\n                     data-name="013241"/>\n              </a>\n            </div>\n            <div class="video-item-group-2" data-name="\u6587\u5B57\u7EC4">\n            <div class="video-item-layer-3" data-name="bg"></div>\n            <div class="video-item-group-3" data-name="\u70B9\u8D5E">\n            <div class="video-item-layer-4" data-name="1,231,243">' + object.gwLike + '</div>\n            <div class="video-item-layer-5 J_addLikeBtn" data-work-id="' + object.id + '" data-name="\u70B9\u8D5E (2)"></div>\n            </div>\n            <div class="video-item-layer-6" data-name="\u5206\u5272\u7EBF"></div>\n            <img class="video-item-layer-7" data-name="\u5934\u50CF" src="' + (object.avatarUrl !== '' ? object.avatarUrl : '') + '"/>\n            <div class="video-item-layer-8" data-name="\u4F5C\u54C1\u540D\u6700\u957F\u663E\u793A\u4E8C\u5341\u4E2A\u5B57\u591A\u7684\u8BDD\u5C31\u7701\u7565\u54AF\u77E5\u9053...">' + object.title + '</div>\n            <div class="video-item-layer-9" data-name="\u4F5C\u8005\u540D\u5B57\u6700\u957F8\u5B57...">' + object.userNickname + '</div>\n            <div class="video-item-layer-10" data-name="\u52A9\u624BID\uFF1A459808599">\u52A9\u624BID\uFF1A' + object.personNum + '</div>\n            </div>\n            </div>\n            </div>';
          });
          $(".item-list").empty().append(html);
          //$.pub.masonry_start();
        } else {
          $('.J_index-pubusearchNum').empty().html(0);
          var searchNoDataResultTimeStamp = +new Date();
          var timeStamp = searchNoDataResultTimeStamp - window.pageLoadBegin;
          window.stReportWithTimeStamp('load_page_error', '加载无结果搜索页', timeStamp);
          if (type === 'search') {
            $('.J_index-puburankSearch').hide();
            $(".item-list").empty().html('<div class="index-pubu-search-nodata J_index-pubusearchNoData" style="display: block;">\n                                          <img src="assets/images/no-result.png" alt="\u6682\u65E0\u6570\u636E">\n                                        </div>');
          } else {
            window.errorTips('暂无作品');
          }
        }
        return $return();
      });
    }
    window.workListSortByTime = null;
    window.workListSortByLike = null;
    searchList = null;
    service = window.serviceFactory(window.XFERequest.jQueryRequest, Promise.reject.bind(Promise), '//test-ws.xoyo.com');
    linkUrl = window.location.href;
    pageSize = 9;
    linkUrl = linkUrl.split('.').join('');
    arrSortByLike = function arrSortByLike(arr) {
      var newArr = arr.concat([]);
      newArr.sort(function (A, B) {
        return B.gwLike - A.gwLike;
      });
      return newArr;
    };
    getLikeList = function getLikeList() {
      /*本次大赛，daily提供视频源，官网统计点赞数，点赞数和视频源分开请求*/
      return new Promise(function ($return, $error) {
        $.ajax({
          url: '//test-ws.xoyo.com/jx3/tongrenxs190515/get_like_list',
          dataType: 'jsonp',
          type: 'POST',
          success: function success($data) {
            if ($data.status === 1) {
              $return($data.data.work_like_list);
            } else {
              window.errorTips($data.msg);
              $error($data.msg);
            }
          },
          error: function error(_error) {
            $error(_error.msg);
          }
        });
      });
    };
    return Promise.resolve(getLikeList()).then(function ($await_6) {
      try {
        likeList = $await_6;
        getWorksList = function getWorksList(params) {
          var orderBy = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
          var page = arguments[2];

          if (!page) {
            throw new Error('作品列表页码参数缺失');
          }
          var begin = (page - 1) * pageSize;
          var end = page * pageSize;
          if (workListSortByTime !== null) {
            if (orderBy === 1) {
              return workListSortByTime.slice(begin, end);
            } else if (workListSortByLike && orderBy === 2) {
              return workListSortByLike.slice(begin, end);
            } else {
              workListSortByLike = arrSortByLike(workListSortByLike);
              try {
                return workListSortByLike.slice(begin, end);
              } catch (e) {
                throw new Error(e);
              }
            }
          } else {
            /*本次大赛，daily提供视频源，官网统计点赞数，点赞数和视频源分开请求*/
            return new Promise(function ($return, $error) {
              $.ajax({
                url: '//test-ws.xoyo.com/core/jhdaily/cms_query',
                dataType: 'jsonp',
                type: 'POST',
                data: params,
                success: function success($data) {
                  if ($data.status === 1) {
                    workListSortByTime = $data.data.reply.data;
                    workListSortByTime.forEach(function (item, index) {
                      /*本次大赛，daily提供
                      ..视频源，官网统计点赞数,两边拉取数据后需要做整合*/
                      if (likeList[item.id]) {
                        item.gwLike = likeList[item.id].count;
                      } else {
                        item.gwLike = 0;
                      }
                    });
                    workListSortByLike = arrSortByLike(workListSortByTime);
                    if (orderBy === 2) {
                      try {
                        $return(workListSortByLike.slice(begin, end));
                      } catch (e) {
                        throw new Error(e);
                      }
                    } else if (orderBy === 1) {
                      try {
                        $return(workListSortByTime.slice(begin, end));
                      } catch (e) {
                        throw new Error(e);
                      }
                    } else {
                      throw new Error('传入了不支持的作品排序类型');
                    }
                  } else {
                    window.errorTips($data.msg);
                    $error($data.msg);
                  }
                },
                error: function error(_error2) {
                  $error(_error2.msg);
                }
              });
            });
          }
        };

        initPubu = function initPubu(_ref) {
          var works_type = _ref.works_type,
              page_num = _ref.page_num,
              _ref$page_size = _ref.page_size,
              page_size = _ref$page_size === undefined ? 9 : _ref$page_size,
              order_by = _ref.order_by,
              change = _ref.change,
              type = _ref.type;

          (function () {
            return new Promise(function ($return, $error) {
              var pageCallback, data, catCode, requestParams;

              if (type = 'index') {
                pageCallback = function pageCallback(page_index, jq) {
                  return new Promise(function ($return, $error) {
                    var requestParams;


                    $('html,body').animate({ scrollTop: '710' }, 800);
                    requestParams = {
                      uri: '/webgw/article/query-by-code',
                      params: JSON.stringify({
                        catCode: catCode,
                        //catId: '',
                        /*daily返回数据的页码是从0开始，分页器页码是从1开始，所以不用做+1处理*/
                        cursor: page_index * 9,
                        size: 0
                      })

                    };
                    return Promise.resolve(getWorksList(requestParams, order_by, page_index + 1)).then(function ($await_7) {
                      try {
                        data = $await_7;
                        initPubuDom(data);
                        return $return();
                      } catch ($boundEx) {
                        return $error($boundEx);
                      }
                    }, $error);
                  });
                };

                data = '';
                catCode = 'Web_Doujin_Match_Novel_Current_Articles';
                requestParams = {
                  uri: '/webgw/article/query-by-code',
                  params: JSON.stringify({
                    catCode: catCode,
                    //catId: '',
                    cursor: 0,
                    size: 0,
                    isRandom: change === 1 ? true : false
                  })
                };

                return Promise.resolve(getWorksList(requestParams, order_by, 1)).then(function ($await_8) {
                  try {
                    window.workListData = $await_8;
                    if (change === 1) {}
                    initPubuDom(workListData, 'list', order_by);

                    $(".pagination").pagination(workListSortByTime.length, {
                      "items_per_page": pageSize,
                      "num_display_entries": 5,
                      "callback": pageCallback,
                      "num_edge_entries": 5,
                      "prev_text": "上一页",
                      "next_text": "下一页",
                      "prev_show_always": true,
                      "next_show_always": true
                    });
                    return $If_4.call(this);
                  } catch ($boundEx) {
                    return $error($boundEx);
                  }
                }.bind(this), $error);
              }

              function $If_4() {
                return $return();
              }

              return $If_4.call(this);
            });
          })();
        };
        getSearchWorks = function getSearchWorks(params) {
          if (params.page && typeof params.page === "number") {
            var begin = (params.page - 1) * pageSize;
            var end = params.page * pageSize;
            var requestParams = {
              uri: '/webgw/article/search',
              params: JSON.stringify({
                catCode: 'Web_Doujin_Match_Novel_Current_Articles',
                //catId: '',
                title: params.keyword,
                cursor: 0,
                size: 200 /*search接口返回上限为200条*/
              })
            };
            if (searchList && searchList.keyword === params.keyword) {
              return searchList.slice(begin, end);
            } else {
              return new Promise(function (resolve, reject) {
                $.ajax({
                  url: '//test-ws.xoyo.com/core/jhdaily/cms_query',
                  dataType: 'jsonp',
                  type: 'POST',
                  data: requestParams,
                  success: function success($data) {
                    if ($data.status === 1) {
                      searchList = $data.data.reply.data;
                      searchList.forEach(function (item, index) {
                        /*本次大赛，daily提供视频源，官网统计点赞数,两边拉取数据后需要做整合*/
                        if (likeList[item.id]) {
                          item.gwLike = likeList[item.id].count;
                        } else {
                          item.gwLike = 0;
                        }
                      });
                      searchList.keyword = params.keyword;
                      resolve(searchList.slice(begin, end));
                    } else {
                      window.errorTips($data.msg);
                      reject($data.msg);
                    }
                  },
                  error: function error(_error3) {
                    reject(_error3.msg);
                  }
                });
              });
            }
          } else {
            throw new Error('搜索列表的页码参数缺失！');
          }
        };
        initSearch = function initSearch(_ref2) {
          var order_by = _ref2.order_by,
              page_num = _ref2.page_num,
              page_size = _ref2.page_size,
              keyword = _ref2.keyword;

          (function () {
            return new Promise(function ($return, $error) {
              var catCode, pageCallback, data;

              catCode = 'Web_Doujin_Match_Novel_Current_Articles';
              if ($.trim(keyword) !== '') {
                pageCallback = function pageCallback(page_index, jq) {
                  return new Promise(function ($return, $error) {
                    var requestParams, searchData;

                    $('html,body').animate({ scrollTop: '710' }, 800);
                    requestParams = {
                      uri: '/webgw/article/search',
                      params: JSON.stringify({
                        catCode: catCode,
                        //catId: '',
                        /*daily返回数据的页码是从0开始，分页器页码是从1开始，所以不用做+1处理*/
                        cursor: page_index * 9,
                        size: 9999
                      })

                    };
                    return Promise.resolve(getSearchWorks({ keyword: keyword, page: page_index + 1 })).then(function ($await_9) {
                      try {
                        searchData = $await_9;
                        initPubuDom(searchData);
                        return $return();
                      } catch ($boundEx) {
                        return $error($boundEx);
                      }
                    }, $error);
                  });
                };

                return Promise.resolve(getSearchWorks({ keyword: keyword, page: page_num })).then(function ($await_10) {
                  try {
                    data = $await_10;
                    //const likeList = await getLikeList();
                    initPubuDom(data, 'search');

                    $(".pagination").pagination(searchList.length, {
                      "items_per_page": pageSize,
                      "num_display_entries": 5,
                      "callback": pageCallback,
                      "num_edge_entries": 5,
                      "prev_text": "上一页",
                      "next_text": "下一页",
                      "prev_show_always": true,
                      "next_show_always": true
                    });
                    return $If_5.call(this);
                  } catch ($boundEx) {
                    return $error($boundEx);
                  }
                }.bind(this), $error);
              } else {
                window.errorTips('请输入搜索关键词~');
                return $If_5.call(this);
              }

              function $If_5() {
                $('.J_index-pubusearchTxt').html(keyword);
                return $return();
              }
            });
          })();
        };

        if (linkUrl.lastIndexOf('searchhtml') > -1) {//如果是搜索页，则不初始化数据

        } else {
          //初始化首页数据
          initPubu({
            works_type: 0, //1服饰 2日用家居 3文创用品 4手办模具 5毛绒公仔 6箱包收纳 7首饰类 8宠物类 9其他类
            page_num: 1, //page_num
            page_size: pageSize, //每页显示条数
            order_by: 1, //1时间 2人气
            change: 0, //1是 2否
            type: 'index'
          });
        };

        //首页选项卡菜单 点击
        $('.J_menu-indexmenuBox').on('click', '.J_menu-indexchangeTags', function () {
          var works_type = parseInt($(this).attr('data-work-type'));
          $('.J_index-puburankBox li').removeClass('index-pubu-rank-cur');
          $('.J_index-puburankBox li').eq(0).addClass('index-pubu-rank-cur');
          if (works_type === 1) {
            $(".index-pubu-rank-box.inList").hide();
          } else {
            $(".index-pubu-rank-box.inList").show();
          }
          initPubu({
            works_type: works_type, //1服饰 2日用家居 3文创用品 4手办模具 5毛绒公仔 6箱包收纳 7首饰类 8宠物类 9其他类
            page_num: 1, //page_num
            page_size: pageSize, //每页显示条数
            order_by: 1, //1时间 2人气
            change: 0, //1是 2否
            type: 'index'
          });
        });

        //首页最新 人气 换一批 点击
        $('.J_index-puburankBox li').on('click', function () {
          var works_type = parseInt($(this).attr('data-work-type'));
          var order_by = parseInt($(this).attr('data-order-by'));
          var change = parseInt($(this).attr('data-change'));
          $(this).addClass('index-pubu-rank-cur');
          $(this).siblings('li').removeClass('index-pubu-rank-cur');
          initPubu({
            works_type: works_type, //1服饰 2日用家居 3文创用品 4手办模具 5毛绒公仔 6箱包收纳 7首饰类 8宠物类 9其他类
            page_num: 1, //page_num
            page_size: pageSize, //每页显示条数
            order_by: order_by, //1时间 2人气
            change: change, //1是 2否
            type: 'index'
          });
        });

        /**
         * 搜索相关
         */
        searchInfo = $.COMMETHOD.getUrlArgs('keywords') ? $.COMMETHOD.getUrlArgs('keywords') : null;
        /**
         * 如果检测到 顶部有搜索参数 那么就先初始化一次 数据
         */
        if (searchInfo) {
          $('.J_index-puburankBox').hide();
          $('.J_menuTopBox').hide();
          $('.J_index-puburankSearch, .J_index-pubusearchNav').show();
          initSearch({
            order_by: 1,
            page_num: 1,
            page_size: pageSize,
            keyword: searchInfo
          });
        }

        $('.J_searchInfoBtn').on('click', function () {
          var keyword = $(this).siblings('.J_searchInfoText').val();
          var searchType = $(this).attr('data-type'); //判断是顶部搜索按钮 还是 首页中间的按钮
          if (!keyword) {
            window.errorTips('请输入搜索内容');
          }
          window.scrollTo(0, 717);

          if (searchType === 'searchTop') {
            window.stReportGlobal('click_search', '点击搜索', keyword);
          } else {
            window.stReportGlobal('input_search_main', '主体搜索', keyword);
          }
          /**
           * 如果是搜索页 那么就不刷新 否则跳转到搜索结果页
           */
          if (linkUrl.lastIndexOf('searchhtml') > -1) {

            initSearch({
              order_by: 1,
              page_num: 1,
              page_size: 90,
              keyword: keyword
            });
          } else {
            window.location.href = 'search.html?keywords=' + keyword + '#searchtop';
          }
        });
        /**
         * search 人气和时间排序事件
         */
        $('.J_index-puburankBoxSearch li').on('click', function () {
          var order_by = $(this).attr('data-order-by'),
              keyword = $('.J_index-pubusearchTxt').html();
          $(this).siblings('li').removeClass('index-pubu-rank-cur');
          $(this).addClass('index-pubu-rank-cur');
          initSearch({
            order_by: order_by,
            page_num: 1,
            page_size: pageSize,
            keyword: keyword
          });
        });
      } catch ($boundEx) {
        return $error($boundEx);
      }
    }, $error);
  });
})();
(function () {
  window.onload = function () {
    var pageLoadComplete = +new Date();
    var timeStamp = pageLoadComplete - window.pageLoadBegin;
    window.stReportWithTimeStamp('load_page_works', '加载作品页', timeStamp);
  };
})();

(function () {
  likeCallBack = function likeCallBack(id) {
    /*点赞后对缓存的数组进行处理*/
    var target = window.workListSortByLike.find(function (item) {
      if (item.id === id) {
        item.gwLike += 1;
        debugger;
        workListSortByLike.sort(function (A, B) {
          return B.gwLike - A.gwLike;
        });
      }
    });
  };
  //点赞
  var service = window.serviceFactory(window.XFERequest.jQueryRequest, Promise.reject.bind(Promise), '//test-ws.xoyo.com'),
      detailShareId = $.COMMETHOD.getUrlArgs('shareid') ? $.COMMETHOD.getUrlArgs('shareid') : null;
  $(document).on('click', '.J_addLikeBtn', function () {
    var works_id = $(this).attr('data-work-id');
    var that = $(this);
    window.stReportGlobal('click_like', '作品点赞');
    var like = function like(param) {
      /*点赞*/
      return new Promise(function (resolve, reject) {
        $.ajax({
          url: '//test-ws.xoyo.com/jx3/tongrenxs190515/like',
          dataType: 'jsonp',
          type: 'POST',
          data: {
            works_id: param.works_id
          },
          success: function success($data) {
            if ($data.code === 1) {
              resolve($data);
            } else if ($data.code === -10402) {
              window.XPASS.signin();
            } else if ($data.code === -20103) {
              window.errorTips('您的点赞次数已用完<br/>前往剑网3推栏 APP<br/>点赞机会再+1！');
            } else {
              window.errorTips($data.msg);
              reject($data.msg);
            }
          },
          error: function error(_error) {
            reject(_error.msg);
          }
        });
      });
    };
    (function () {
      return new Promise(function ($return, $error) {
        var data;
        return Promise.resolve(like({
          works_id: works_id,
          type: 'PC'
        })).then(function ($await_1) {
          try {
            data = $await_1;
            if (data) {
              if (that.hasClass('detail-pop-btn')) {
                //如果是内容页的点赞
                $('.J_detail-poplikeBtnWrap').addClass('tada animated item-support-ok');
                setTimeout(function () {
                  $('.J_detail-poplikeBtnWrap').removeClass('tada animated');
                }, 1000);
                /*const id = that.attr('data-work-id');
                likeCallBack(id);*/
                $('.J_detail-poplikeNum').html(parseInt($('.J_detail-poplikeNum').html()) + 1);
              } else {
                that.addClass('tada animated item-support-ok');
                setTimeout(function () {
                  that.removeClass('tada animated');
                }, 1000);
                /*const id = that.attr('data-work-id');
                likeCallBack(id);*/
                that.siblings().html(parseInt(that.siblings().html()) + 1);
              }
            }
            return $return();
          } catch ($boundEx) {
            return $error($boundEx);
          }
        }, $error);
      });
    })();
  });
  /*根据id查询作品数据*/
  var getWorksById = function getWorksById(params) {
    var requestParams = {
      uri: '/webgw/article/detail',
      params: JSON.stringify({
        articleId: params.works_id,
        //catId: '',
        commentSize: 0,
        hotCommentSize: 1
      })
    };
    return new Promise(function (resolve, reject) {
      $.ajax({
        url: '//test-ws.xoyo.com/core/jhdaily/cms_query',
        dataType: 'jsonp',
        type: 'POST',
        data: requestParams,
        success: function success($data) {
          if ($data.status === 1) {
            resolve($data);
          } else {
            window.errorTips($data.msg);
            reject($data.msg);
          }
        },
        error: function error(_error2) {
          reject(_error2.msg);
        }
      });
    });
  };

  /*根据id查询作品点赞数*/
  var getLikeById = function getLikeById(params) {
    return new Promise(function ($return, $error) {
      $.ajax({
        url: '//test-ws.xoyo.com/jx3/tongrenxs190515/get_count_by_id',
        dataType: 'jsonp',
        type: 'POST',
        data: {
          works_id: params.works_id
        },
        success: function success($data) {
          if ($data.status === 1) {
            $return($data.data.count);
          } else {
            window.errorTips($data.msg);
            $error($data.msg);
          }
        },
        error: function error(_error3) {
          $error(_error3.msg);
        }
      });
    });
  };
  /*拉取随机作品列表数据*/
  getRandomVideoList = function getRandomVideoList(params) {
    /*本次大赛，daily提供视频源，官网统计点赞数，点赞数和视频源分开请求*/
    return new Promise(function ($return, $error) {
      $.ajax({
        url: '//test-ws.xoyo.com/core/jhdaily/cms_query',
        dataType: 'jsonp',
        type: 'POST',
        data: params,
        success: function success($data) {
          if ($data.status === 1) {
            $return($data);
          } else {
            window.errorTips($data.msg);
            $error($data.msg);
          }
        },
        error: function error(_error4) {
          $error(_error4.msg);
        }
      });
    });
  };
  /*拉取点赞数列表*/
  var getLikeList = function getLikeList() {
    /*本次大赛，daily提供视频源，官网统计点赞数，点赞数和视频源分开请求*/
    return new Promise(function ($return, $error) {
      $.ajax({
        url: '//test-ws.xoyo.com/jx3/tongrenxs190515/get_like_list',
        dataType: 'jsonp',
        type: 'POST',
        success: function success($data) {
          if ($data.status === 1) {
            $return($data.data.work_like_list);
          } else {
            window.errorTips($data.msg);
            $error($data.msg);
          }
        },
        error: function error(_error5) {
          $error(_error5.msg);
        }
      });
    });
  };
  //渲染内容页内容
  var showDetail = function showDetail(_ref) {
    var works_id = _ref.works_id;

    var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
    //$('.J_detail-poppopInfo').css('top', scrollTop);
    $('.J_detail-poppopInfo, .J_detail-popmask').fadeIn();

    function loadImage(src) {
      return new Promise(function (resolve, reject) {
        var image = new Image();
        image.onload = resolve;
        image.onerror = reject;
        image.src = src;
      });
    }

    (function () {
      return new Promise(function ($return, $error) {
        var data, likeCount, requestParams, randomList, likeList, html, htmlUser, itemUser, hotComment, getShareArgs, activeTagType, weixinShareUrl, isShowWeixin, quality;
        return Promise.resolve(getWorksById({
          works_id: works_id
        })).then(function ($await_2) {
          try {
            data = $await_2;
            return Promise.resolve(getLikeById({
              works_id: works_id
            })).then(function ($await_3) {
              try {
                likeCount = $await_3;
                data.data.reply.gwLike = likeCount;
                requestParams = {
                  uri: '/webgw/article/search',
                  params: JSON.stringify({
                    catCode: 'Web_Doujin_Match_Novel_Current_Articles',
                    //catId: '',
                    cursor: 0,
                    size: 4,
                    isRandom: true
                  })
                };
                return Promise.resolve(getRandomVideoList(requestParams)).then(function ($await_4) {
                  try {
                    randomList = $await_4.data.reply.data;
                    return Promise.resolve(getLikeList()).then(function ($await_5) {
                      try {
                        likeList = $await_5;
                        randomList.forEach(function (item, index) {
                          if (likeList[item.id]) {
                            item.gwLike = likeList[item.id].count;
                          } else {
                            item.gwLike = 0;
                          }
                          $('.recommend-works-item.item-' + (index + 1)).attr('data-work-id', item.id);
                          $('.recommend-works-item.item-' + (index + 1) + ' div').css('background', 'url(' + item.thumb + ')');
                          $('.recommend-works-item.item-' + (index + 1) + ' div').css('background-size', '100% 100%');
                          $('.recommend-works-item.item-' + (index + 1) + ' p span.title').html(item.title);
                          $('.recommend-works-item.item-' + (index + 1) + ' p span.author-name').html(item.userNickname);
                          $('.recommend-works-item.item-' + (index + 1) + ' p span.like span.value').text(item.gwLike);
                          $('.recommend-works-item.item-' + (index + 1)).show();
                        });
                        if (data) {
                          html = '', htmlUser = '', itemUser = data.data.reply;
                          //$.each(data.works_list, function (i, item) {
                          html += '<img class="swiper-lazy" src="' + itemUser.thumb + '" alt="' + itemUser.name + '" />';
                          //});
                          htmlUser = ' <h2 class="detail-pop-tit">' + itemUser.title + '</h2>\n                            <p class="detail-pop-time">' + itemUser.createTime + '</p>\n                            <div class="detail-pop-avatar-box">\n                              <div class="detail-pop-avatar">\n                                <img src="' + itemUser.avatarUrl + '" alt="">\n                              </div>\n                              <div class="detail-pop-name">\n                                <p class="detail-pop-name-txt">' + itemUser.userNickname + '</p>\n                                <p class="detail-pop-time">\u52A9\u624BID\uFF1A' + itemUser.personNum + '</p>\n                              </div>\n                              <div class="detail-pop-check-author J_detail-popDaily-author-Btn"></div>\n                            </div>\n                            <div class="detail-pop-btn-box">\n                              <div class="detail-pop-btn J_addLikeBtn" data-like-type="detail" data-work-id="' + itemUser.id + '" style="display: none;">\n                              <span class="J_detail-poplikeBtnWrap">\n                                <strong>\u8D5E</strong>\n                                <strong>(<em class="J_detail-poplikeNum">' + itemUser.gwLike + '</em>)</strong>\n                              </span>\n                              </div>\n                            </div>';
                          $('.video-box').html(html);
                          $('.J_detail-popuserInfo').empty().html(htmlUser); //内容页右侧内容
                          if (itemUser.hotComments.length > 0) {
                            hotComment = itemUser.hotComments[0];
                            $('.J_detail-popdetailIdea .hot-comment-content').html(hotComment.comment);
                            $('.J_detail-popdetailIdea .hot-comment-author .avatar').attr('src', hotComment.avatarUrl);
                            $('.J_detail-popdetailIdea .hot-comment-author .name').html(hotComment.nickname);
                            if (hotComment.roleName.length > 0) {
                              $('.J_detail-popdetailIdea .hot-comment-author .role-name').html(hotComment.roleName);
                            } else {
                              $('.J_detail-popdetailIdea .hot-comment-author .role-name').html('暂无角色信息');
                            }

                            $('.J_detail-popdetailIdea .hot-comment-author .server').html(hotComment.server);
                            $('.J_detail-popdetailIdea .hot-comment-author .school').html(hotComment.school);
                          } else {
                            $('.J_detail-popdetailIdea .hot-comment-content').html('暂无热评~');
                            $('.J_detail-popdetailIdea .hot-comment-author').hide();
                          }
                          $('.J_detail-popreportLink').attr('href', 'report.html?id=' + itemUser.id + '&title=' + itemUser.name);
                          getShareArgs = function getShareArgs(type) {
                            switch (type) {
                              case 'QQ':
                                var component = '';
                                component += 'url=' + (encodeURIComponent('https://jx3.xoyo.com/zt/2019/05/27/tongren-novel/detail.html?id=') + itemUser.id);
                                component += '&title=' + encodeURIComponent('江湖入话！首届剑网3同人嘉年华小说大赛开启啦！');
                                component += '&desc=' + encodeURIComponent('江湖入话，杯酒盏茶。首届剑网3同人嘉年华剑网3推栏小说大赛开始啦！诚邀各路大侠参与征集，百万现金奖池、重制版同人嘉年华定制特效挂件、重制版专属称号、官方小说套装大礼包、剑网3十周年线下庆典嘉宾资格等你拿！');
                                component += '&summary=';
                                component += '&site=';
                                component += '&pics=http://jx3.xoyo.com/zt/2019/05/27/tongren-novel-share-pc.jpg';
                                return component;

                              case 'WEIBO':
                                var _component = '';
                                _component += 'url=' + (encodeURIComponent('https://jx3.xoyo.com/zt/2019/05/27/tongren-novel/detail.html?id=') + itemUser.id);
                                _component += '&title=' + encodeURIComponent('江湖入话，杯酒盏茶。首届剑网3同人嘉年华#剑网3推栏小说大赛#开始啦！诚邀各路大侠参与征集，百万现金奖池、重制版同人嘉年华定制特效挂件、重制版专属称号、官方小说套装大礼包、剑网3十周年线下庆典嘉宾资格等你拿！获奖作品将有机会加入官方共创计划，还可获得西山居offer哦！');
                                _component += '&appkey=';
                                _component += '&pic=http://jx3.xoyo.com/zt/2019/05/27/tongren-novel-share-pc.jpg';
                                _component += '&searchPic=true#_loginLayer_1556245391157';
                                return _component;

                            }
                          };
                          $('.J_shareQqLink').attr('href', 'https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?' + getShareArgs('QQ'));
                          $('.J_shareWeiboLink').attr('href', 'http://service.weibo.com/share/share.php?' + getShareArgs('WEIBO'));
                          activeTagType = $('.menu-index-menu-on').attr('data-work-type');
                          weixinShareUrl = '';
                          if (activeTagType === '0') {
                            weixinShareUrl = 'https://test-zt.xoyo.com/jx3.xoyo.com/m/2019/05/27/tongren-novel/index.html?utm_source=gw#/details/' + itemUser.id;
                          } else if (activeTagType === '1') {
                            weixinShareUrl = 'https://test-zt.xoyo.com/jx3.xoyo.com/m/2019/05/27/tongren-novel/index.html?utm_source=gw#/details/' + itemUser.id;
                          } else {
                            /*首页没有选项卡作为参考，*/
                            weixinShareUrl = 'https://jx3.xoyo.com/m/2019/05/27/tongren-novel/index.html?utm_source=gw#/details/' + itemUser.id;
                          }
                          //微信二维码弹出窗
                          isShowWeixin = true;
                          $('.J_detail-popweixinBtn').on('click', function () {
                            $('.J_detail-popweixinBox').show();
                            $(".J_detail-popweixin").empty();
                            $(".J_detail-popweixin").qrcode({
                              render: "canvas",
                              width: 205,
                              height: 205,
                              correctLevel: 0,

                              text: weixinShareUrl
                              //text: 'http://s.xoyo.com/P9mBM'
                            });
                          });
                          $('.J_detail-popweixinClose').on('click', function () {
                            $('.J_detail-popweixinBox').hide();
                          });
                          //daily二维码弹出
                          $('.J_detail-popDailyBtn').on('click', function () {
                            $('.J_detail-popDailyBox').show();
                            $(".J_detail-popDaily").empty();
                          });
                          $('.J_detail-popDailyClose').on('click', function () {
                            $('.J_detail-popDailyBox').hide();
                          });

                          //举报二维码弹出
                          $('.J_detail-popJubaoBtn').on('click', function () {
                            $('.J_detail-popJubaoBox').show();
                            $(".J_detail-popJubao").empty();
                          });
                          $('.J_detail-popJubaoClose').on('click', function () {
                            $('.J_detail-popJubaoBox').hide();
                          });
                          //daily作者搜索引导弹出
                          $('.J_detail-popDaily-author-Btn').on('click', function () {
                            $('.J_detail-popDaily-authorBox').show();
                            $(".J_detail-popDaily-author").empty();
                          });
                          $('.J_detail-popDaily-authorClose').on('click', function () {
                            $('.J_detail-popDaily-authorBox').hide();
                          });

                          $('.J_swiperList').empty().html(html);
                          /*初始化视频*/
                          quality = [];
                          /*if (itemUser.video && typeof itemUser.video === 'object') {
                            if (itemUser.video.resolutionInfoes.length > 0) {
                              itemUser.video.resolutionInfoes.forEach((val, index) => {
                                const {type, url} = val;
                                let videoType = {
                                  name: type,
                                  url: `https://wvcdn.pvp.xoyo.com/${url}`,
                                  type: 'hls'
                                };
                                quality.push(videoType);
                              });
                              window.pageDplayVideo = new DPlayer({
                                container: document.getElementById('video-content'),
                                video: {
                                  quality: quality,
                                  defaultQuality: 0,
                                  //pic: screenShot,
                                  autoplay: true
                                }
                              });
                              pageDplayVideo.play();
                            } else {
                              window.errorTips('视频内容出错了~')
                            }
                          } else {
                            window.errorTips('视频内容出错了~')
                          }*/

                          $('.detail-pop-left').append($(itemUser.content));
                          //await loadImage(data.works_list[0].pic_link);
                          /*const swiper = new Swiper('.swiper-container', {
                            paginationClickable: true,
                            nextButton: '.swiper-button-next',
                            lazyLoading: true,
                            prevButton: '.swiper-button-prev',
                            autoHeight: true, //enable auto height
                          });*/
                        }

                        return $return();
                      } catch ($boundEx) {
                        return $error($boundEx);
                      }
                    }, $error);
                  } catch ($boundEx) {
                    return $error($boundEx);
                  }
                }, $error);
              } catch ($boundEx) {
                return $error($boundEx);
              }
            }, $error);
          } catch ($boundEx) {
            return $error($boundEx);
          }
        }, $error);
      });
    })();
  };

  //如果是分享过来的，并且URL带了ID，那么渲染弹出窗，显示内容
  if (detailShareId) {
    $('.J_detail-poppopInfo, .J_detail-popmask').fadeIn();
    showDetail({ works_id: detailShareId });
  }

  //显示内容页
  if (window.location.href.lastIndexOf('detail.html') > -1) {
    var works_id = getUrlParameter('id');
    showDetail({ works_id: works_id });
  }
  $(document).on('click', '.J_showDetailWork', function () {
    var works_id = $(this).attr('data-work-id');
    //window.open('detail.html?id=' + works_id);
  });

  $(document).on('click', '.J_globalClickTrack', function () {
    var trackName = $(this).attr('data-tongji-name');
    var trackDesc = $(this).attr('data-tongji-desc');
    window.stReportGlobal(trackName, trackDesc);
  });

  $(document).on('click', '.ClickTrackWithWorkName', function () {
    var trackName = $(this).attr('data-tongji-name');
    var trackDesc = $(this).attr('data-tongji-desc');
    var workName = $(this).attr('data-work-name');
    window.stReportWithName(trackName, trackDesc, workName);
  });
})();</script>

</body>
</html>
