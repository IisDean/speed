<!doctype html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">
    <!-- 让添加到主屏幕的网页再次打开时全屏展示，可添加：   -->
    <meta content="yes" name="mobile-web-app-capable">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name="robots" content="all">
    <meta name="Description" content="《雪鹰领主》手游——超凡入圣，破界成神！">
    <meta name="Keywords" content="雪鹰领主预约站,雪鹰领主,官方手游,漫游联动,官网,短视频社交城战,自创技能">
    <title>方言测试-雪鹰领主官方网站-腾讯游戏</title>
    <link rel="stylesheet" href="./ossweb-img/css/common.css">
    <script>
        //屏幕适应
        (function (win, doc) {
            if (!win.addEventListener) return;
            var html = document.documentElement;

            function setFont() {
                var html = document.documentElement;
                var k = 750;
                html.style.fontSize = html.clientWidth / k * 100 + "px";
            }
            setFont();
            setTimeout(function () {
                setFont();
            }, 300);
            doc.addEventListener('DOMContentLoaded', setFont, false);
            win.addEventListener('resize', setFont, false);
            win.addEventListener('load', setFont, false);
        })(window, document);
    </script>
    <style>
        #stage {
            background-image: url('./ossweb-img/p_bg_0.jpg');
            background-position: center center;
            background-size: 100% auto;
            overflow: scroll;
            -webkit-overflow-scrolling: touch;
        }

        @media screen and (min-height: 668px) {
            .wrap {
                position: absolute;
                top: 50%;
                left: 0;
                z-index: 1;
                transform: translateY(-50%);
                -webkit-transform: translateY(-50%);
                width: 100%;
            }
        }

        @media screen and (max-height: 667px) {
            .wrap {
                margin: .8rem 0 .4rem;
            }
        }

        .poster-container {
            margin: 0rem auto 0;
            width: 6.73rem;
            overflow: hidden;
        }

        .poster-wrap {
            width: 6.73rem;
            height: 9.6rem;
        }

        .sava-tips-text {
            margin: 0.25rem 0;
            font-weight: bold;
            font-size: .22rem;
            color: #462b1f;
        }

        .again-btn,
        .share-btn,
        .cj-btn {
            display: block;
            width: 2.37rem;
            height: .76rem;
        }

        .again-btn {
            background-position: 0 -.9rem;
        }

        .share-btn {
            margin-left: .78rem;
            background-position: 0 -1.7rem;
        }

        .cj-btn {
            background-position: 0 -7.11rem;
        }

        .poster-share {
            top: 0;
            left: 0;
            right: 0;
            margin: 0 auto;
            width: 6.73rem;
        }

        .pop1 {
            width: 6.38rem;
            height: 7.87rem;
            background-image: url('./ossweb-img/pop_bg1.jpg');
        }

        .pop2 {
            width: 6.38rem;
            height: 9.17rem;
            background-image: url('./ossweb-img/pop_bg2.jpg');
        }

        .pop3 {
            width: 6.38rem;
            height: 7.99rem;
            background-image: url('./ossweb-img/pop_bg3.jpg');
        }

        .pop4 {
            width: 6.38rem;
            height: 6.31rem;
            background-image: url('./ossweb-img/pop_bg4.jpg');
        }

        .pop-title-text {
            margin-top: .65rem;
        }

        .success-text {
            margin-top: 1.1rem;
            line-height: 1;
            font-size: .6rem;
            color: #6e3c2b;
        }

        .fail-text {
            margin-top: 1.8rem;
            line-height: 1;
            font-size: .45rem;
            color: #6e3c2b;
        }

        .pop-msg-text {
            text-align: justify;
        }

        .prize-gift1 {
            margin: .54rem auto;
            width: 3.51rem;
        }

        .prize-gift2 {
            margin: .35rem auto;
            width: 2.66rem;
        }

        .get-btn {
            margin: .48rem auto 0;
            width: 2.37rem;
            height: .73rem;
            background-position: 0 -3.14rem;
        }

        .open-btn,
        .confirm-btn,
        .gl-btn,
        .get-confirm-btn {
            width: 2.37rem;
            height: .72rem;
        }

        .open-btn {
            margin: 1.04rem auto 0;
            background-position: 0 -4.71rem;
        }

        .confirm-btn {
            margin: 1.04rem auto 0;
            background-position: 0 -3.93rem;
        }

        .gl-btn {
            margin: .8rem auto 0;
            background-position: 0 -5.5rem;
        }

        .get-confirm-btn {
            margin: .7rem auto 0;
            background-position: 0 -6.29rem;
        }

        .pop-share {
            position: absolute;
            top: .4rem !important;
            right: .4rem !important;
            left: auto !important;
            margin: 0 !important;
            width: 4.51rem;
        }

        .select-wrap,
        .input-wrap {
            margin: .4rem auto 0;
            width: 5.3rem;
            height: .62rem;
        }

        .select-wrap {
            background-image: url('./ossweb-img/select_bg.png');
        }

        .input-wrap {
            background-image: url('./ossweb-img/input_bg.png');
        }

        .select-wrap select,
        .input-wrap input {
            display: block;
            box-sizing: border-box;
            width: 100%;
            height: 100%;
            font-size: .3rem;
            color: #6e3c2b;
            border: none;
            background-color: transparent;
        }

        .select-wrap select {
            padding: 0 1rem 0 .28rem;
        }

        .input-wrap input {
            padding: 0 .28rem;
        }

        .input-wrap input::-webkit-input-placeholder {
            color: #6e3c2b;
        }

        .light-wrap {
            position: relative;
            height: 3.9rem;
            overflow: hidden;
        }

        .light-icon {
            top: 50%;
            left: 0;
            right: 0;
            margin: -2.5rem auto 0;
            width: 5rem;
            height: 5rem;
            background-image: url('./ossweb-img/light.png');
        }

        .lottery-btn {
            display: block;
            position: relative;
            z-index: 1;
            margin: .9rem auto 0;
            width: 2.12rem;
            height: 2.12rem;
            background-image: url('./ossweb-img/get_prize.png');
        }

        .lottery-btn {
            animation: scaleBtn .8s linear infinite;
            -webkit-animation: scaleBtn .8s linear infinite;
        }

        @keyframes scaleBtn {

            0%,
            100% {
                transform: scale(.9);
            }

            50% {
                transform: scale(1);
            }
        }

        @-webkit-keyframes scaleBtn {

            0%,
            100% {
                transform: scale(.9);
            }

            50% {
                transform: scale(1);
            }
        }

        .light-icon {
            animation: light 10s linear infinite;
            -webkit-animation: light 10s linear infinite;
        }

        @keyframes light {
            to {
                transform: rotate(360deg);
            }
        }

        @-webkit-keyframes light {
            to {
                -webkit-transform: rotate(360deg);
            }
        }
    </style>
    <!-- 页面设计: cp | 页面制作： cp | 创建： 2019/12/17 -->
</head>

<body>
    <h1 class="hide">方言测试</h1>
    <div class="flex top-menu">
        <div class="full-img top-logo">
            <img src="./ossweb-img/logo_2.png" alt="">
        </div>
        <div class="flex-1">
            <p class="game-title-text">雪鹰领主</p>
            <p class="game-msg-text">腾讯2019收官大作</p>
        </div>
        <a href="javascript: alert('即将开启，敬请期待！');" onclick="PTTSendClick('btn','opengame1','进入游戏');"
            class="flex flex-center flex-middle download-game">
            <span>进入游戏</span>
        </a>
    </div>
    <div class="stage" id="stage">
        <div class="wrap">
            <div class="poster-container">
                <div class="poster-wrap">
                    <canvas class="canvas" width="673" height="1164"></canvas>
                </div>
                <div id="qrcode" style="display: none;"></div>
            </div>
            <p class="t-c sava-tips-text">长按图片保存至相册</p>
            <div class="flex flex-center" style="margin: .2rem 0 0;">
                <!-- <a href="answer.html" class="icons again-btn btn-hover t"
                    onclick="PTTSendClick('btn','again','重新测试');">重新测试</a> -->
                <a href="javascript: popShow('pop8');" class="icons cj-btn btn-hover t"
                    onclick="PTTSendClick('btn','goLottery','抽取奖励');">抽取奖励</a>
                <a href="javascript: popShow('popShare');" class="icons share-btn btn-hover t"
                    onclick="PTTSendClick('btn','share','分享');">分享</a>
            </div>
        </div>
    </div>
    <!-- pop以下是弹出层信息 -->
    <!-- 100京东E卡 -->
    <div class="bg pop pop1" id="pop1" style="display: none;">
        <div class="pop-con">
            <div class="full-img pop-logo">
                <img src="./ossweb-img/logo.png" alt="雪鹰领主手游">
            </div>
            <h1 class="pop-title-text">恭喜您获得：</h1>
            <div class="full-img prize-gift1">
                <img src="./ossweb-img/prize_1.png" alt="">
            </div>
            <p class="pop-msg-text">更有机会获得200元京东卡、100元京东卡、50元京东卡、30元Q币卡、10元Q币卡、价值18元游戏道具礼包</p>
            <a href="javascript: popShow('pop7');" class="pop-btn icons get-btn t">领取奖励</a>
        </div>
        <a href="javascript: popHide();" class="pa icons close-btn t">关闭弹窗</a>
    </div>
    <!-- 15元游戏礼包 -->
    <div class="bg pop pop2" id="pop2" style="display: none;">
        <div class="pop-con">
            <div class="full-img pop-logo">
                <img src="./ossweb-img/logo.png" alt="雪鹰领主手游">
            </div>
            <h1 class="pop-title-text">恭喜您获得：</h1>
            <div class="full-img prize-gift2">
                <img src="./ossweb-img/prize_2.png" alt="">
            </div>
            <a href="javascript: popShow('pop6');" class="pop-btn icons get-btn t">领取奖励</a>
        </div>
        <a href="javascript: popHide();" class="pa icons close-btn t">关闭弹窗</a>
    </div>
    <!-- 18元游戏礼包 -->
    <div class="bg pop pop3" id="pop3" style="display: none;">
        <div class="pop-con">
            <div class="full-img pop-logo">
                <img src="./ossweb-img/logo.png" alt="雪鹰领主手游">
            </div>
            <h1 class="pop-title-text">恭喜您获得：</h1>
            <div class="full-img prize-gift2">
                <img src="./ossweb-img/prize_3.png" alt="">
            </div>
            <a href="javaszcript: popShow('pop6');" class="pop-btn icons get-btn t">领取奖励</a>
        </div>
        <a href="javascript: popHide();" class="pa icons close-btn t">关闭弹窗</a>
    </div>
    <!-- 很遗憾 您没有获得奖励 -->
    <div class="bg pop pop4" id="pop10" style="display: none;">
        <div class="pop-con">
            <div class="full-img pop-logo">
                <img src="./ossweb-img/logo.png" alt="雪鹰领主手游">
            </div>
            <h1 class="fail-text t-c">很遗憾！您没有获得奖励！</h1>
        </div>
        <a href="javascript: popHide();" class="pa icons close-btn t">关闭弹窗</a>
    </div>
    <!-- 领取成功 关联游戏 -->
    <div class="bg pop pop4" id="pop4" style="display: none;">
        <div class="pop-con">
            <div class="full-img pop-logo">
                <img src="./ossweb-img/logo.png" alt="雪鹰领主手游">
            </div>
            <h1 class="success-text t-c">领取成功！</h1>
            <a href="javascript: alert('即将开启，敬请期待!');" class="pop-btn icons open-btn t">关联游戏</a>
        </div>
        <a href="javascript: popHide();" class="pa icons close-btn t">关闭弹窗</a>
    </div>
    <!-- 领取成功 确认 -->
    <div class="bg pop pop4" id="pop5" style="display: none;">
        <div class="pop-con">
            <div class="full-img pop-logo">
                <img src="./ossweb-img/logo.png" alt="雪鹰领主手游">
            </div>
            <h1 class="success-text t-c">领取成功！</h1>
            <a href="javascript: popHide();" class="pop-btn icons confirm-btn t">确认</a>
        </div>
        <a href="javascript: popHide();" class="pa icons close-btn t">关闭弹窗</a>
    </div>
    <!-- 关联游戏 -->
    <div class="bg pop pop2" id="pop6" style="display: none;">
        <div class="pop-con">
            <div class="full-img pop-logo">
                <img src="./ossweb-img/logo.png" alt="雪鹰领主手游">
            </div>
            <div class="bg select-wrap" style="margin-top: .96rem;">
                <select id="">
                    <option value="1">微信/QQ账号</option>
                </select>
            </div>
            <div class="bg select-wrap">
                <select id="">
                    <option value="1">安卓/IOS</option>
                </select>
            </div>
            <div class="bg select-wrap">
                <select id="">
                    <option value="1">区服</option>
                </select>
            </div>
            <div class="bg select-wrap">
                <select id="">
                    <option value="1">角色</option>
                </select>
            </div>
            <a href="javascript: popHide();" class="pop-btn icons gl-btn J-gl-btn t">领取奖励</a>
        </div>
        <a href="javascript: popHide();" class="pa icons close-btn t">关闭弹窗</a>
    </div>
    <!-- 领取京东E卡 提交联系方式 -->
    <div class="bg pop pop3" id="pop7" style="display: none;">
        <div class="pop-con">
            <div class="full-img pop-logo">
                <img src="./ossweb-img/logo.png" alt="雪鹰领主手游">
            </div>
            <p class="pop-msg-text" style="margin-top: .74rem;">我们将再三个工作日之内将奖品的兑换码发送至您的手机，请留下您的信息！</p>
            <div class="bg input-wrap" style="margin-top: .5rem;">
                <input type="text" placeholder="姓名" />
            </div>
            <div class="bg input-wrap">
                <input type="tel" placeholder="手机号码" />
            </div>
            <a href="javascript: popHide();" class="pop-btn icons get-confirm-btn get-ecard-btn t">确认领取</a>
        </div>
        <a href="javascript: popHide();" class="pa icons close-btn t">关闭弹窗</a>
    </div>
    <!-- 点击抽奖 -->
    <div class="bg pop pop3" id="pop8" style="display: none;">
        <div class="pop-con">
            <div class="full-img pop-logo">
                <img src="./ossweb-img/logo.png" alt="雪鹰领主手游">
            </div>
            <div class="light-wrap">
                <div class="pa bg light-icon"></div>
                <a href="javascript: lotteryPrize();" class="btn bg lottery-btn"></a>
            </div>
            <p class="pop-msg-text">有机会获得200元京东卡、100元京东卡、50元京东卡、30元Q币卡、10元Q币卡、价值18元游戏道具礼包。</p>
        </div>
        <a href="javascript: popHide();" class="pa icons close-btn t">关闭弹窗</a>
    </div>
    <!-- 引导分享 -->
    <div class="pop full-img pop-share" id="popShare" onclick="popHide()" style="display: none;">
        <img src="./ossweb-img/share_pop.png" alt="">
    </div>
</body>
<script src="//game.gtimg.cn/images/js/zepto/zepto.min.js"></script>
<script src="//ossweb-img.qq.com/images/js/milo_bundle/milo.js"></script>
<script src="./ossweb-img/js/hidpi-canvas.min.js"></script>
<script src="./ossweb-img/js/qrcode.min.js"></script>
<script src="./ossweb-img/js/poster.js"></script>
<script>
    //抽取奖励
    function lotteryPrize() {
        popHide();
        var idx = Math.round(getRandom(1, 3));
        popShow("pop" + idx);
    }

    //获取随机数
    function getRandom(min, max) {
        return Math.random() * (max - min) + min;
    }

    //关联游戏
    $(".J-gl-btn").on("click", function () {
        alert('关联成功');
        window.location.href = 'poster.html';
    });

    //领取京东E卡,提交联系方式
    $(".get-ecard-btn").on("click", function () {
        var name = $("#userName").val(),
            mobile = $("#userMobile").val();
        if (name == '') return alert('请输入您的姓名');
        if (mobile == '') return alert('请输入您的手机号码');
        alert('提交成功');
        window.location.href = 'poster.html';
    });

    //生成海报二维码,需引入qrcode.min.js文件
    var qrcode = new QRCode(document.getElementById("qrcode"), {
        width: 111,
        height: 111
    });
    qrcode.makeCode("http://192.168.9.53/speed/201912/a20191217answer/poster.html"); //海报二维码地址
    var grade = parseInt(Math.random() * 10) * 10, //答题所得分数
        wxName = '微信昵称微信昵称', //用户微信昵称
        nameTextColor = '#494e46', //微信昵称颜色
        $state = $(".stage");
    //微信名称过长截断
    if (wxName.length > 4) wxName = wxName.substring(0, 4) + '... 荣获';
    //海报姓名颜色判断
    if (grade == 0) {
        nameTextColor = '#494e46';
    } else if (grade >= 10 && grade <= 30) {
        nameTextColor = '#2e2341';
        $state.css("background-image", 'url(./ossweb-img/p_bg_10.jpg)');
    } else if (grade >= 40 && grade <= 60) {
        nameTextColor = '#2e2341';
        $state.css("background-image", 'url(./ossweb-img/p_bg_60.jpg)');
    } else if (grade >= 70 && grade <= 90) {
        nameTextColor = '#622405';
        $state.css("background-image", 'url(./ossweb-img/p_bg_90.jpg)');
    } else if (grade >= 100) {
        nameTextColor = '#622405';
        $state.css("background-image", 'url(./ossweb-img/p_bg_100.jpg)');
    }
    //绘制海报
    var $posterWrap = $(".poster-wrap");
    var poster = drawPoster.init({
        canvas: document.querySelector('canvas'),
        cWidth: $posterWrap.width(), //海报宽度
        cHeight: $posterWrap.height(), //海报高度
        imgList: [{
            src: './ossweb-img/avatar.png', //微信头像,需传入
            x: 44,
            y: 26,
            w: 75,
            h: 75
        }, {
            src: './ossweb-img/poster_' + grade + '.png', //海报背景,需传入答题分数
            x: 0,
            y: 0,
            w: 673,
            h: 1164
        }],
        qrcode: {
            obj: $("#qrcode img")[0], //需要在上面代码生成二维码，此处不用修改
            x: 67,
            y: 1038,
            w: 111,
            h: 111
        },
        textList: [{
            name: wxName, //需要在上面传入微信昵称,此处不用修改
            nameTextColor: nameTextColor,
            font: 'bold 30px Arial',
            textAlign: 'left',
            textBaseline: 'top',
            x: 135,
            y: 55
        }],
        callback: function (ref) {
            //ref为海报img对象
            $(".poster-wrap").empty().append(ref);
        }
    });

    //隐藏分享遮罩
    $("body").on("click", "div[for='popShare']", function () {
        $("#popShare").click();
    });

    //弹窗
    var popIsShow = false;
    var popDom = null;
    function popShow(id) {
        popHide();
        var p = $('#' + id);
        popDom = p;
        if (p) {
            p.show().css({
                position: 'fixed',
                top: '50%',
                left: '50%',
                marginTop: -popDom.height() / 2 + 'px',
                marginLeft: -popDom.width() / 2 + 'px',
                zIndex: 998
            });
            p.attr('for', 'pop');
            popIsShow = true;
            if ($('[for="' + id + '"]').length >= 1) return;
            $('body').append('<div name="overlay" for=' + id + ' style="width:100%;height:100%;position:fixed;top:0;left:0;z-index:997;background:rgba(0,0,0,0.8);"></div>');
        }
    }
    function popHide() {
        $('[for="pop"]').hide().attr('style', '');
        $('[name="overlay"]').remove();
    }
    window.addEventListener("resize", function () {
        if (!popIsShow)
            return;
        setTimeout(function () {
            popDom.css({
                marginTop: -popDom.height() / 2 + 'px',
                marginLeft: -popDom.width() / 2 + 'px',
                zIndex: 998
            });
        }, 400)
    });
</script>
<script src="//ossweb-img.qq.com/images/js/PTT/ping_tcss_tgideas_https_min.js"></script>
<script>
    //统计
    var setSite = {
        siteType: "a20191217answer",
        pageType: "poster",
        pageName: "海报页",
        osact: 0,
        ingame: 0,
        stayTime: 0
    };
    if (typeof (pgvMain) == 'function') pgvMain();
</script>

</html>